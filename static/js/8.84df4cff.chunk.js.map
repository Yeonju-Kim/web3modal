{"version":3,"sources":["../../src/ObservableStore.ts","../node_modules/is-stream/index.js","../../src/interfaces.ts","../../src/supportedCurrencies.ts","../../src/config.ts","../../src/embedUtils.ts","../../src/loglevel.ts","../../src/messages.ts","../../src/utils.ts","../../src/inpage-provider.ts","../../src/integrity.ts","../../src/PopupHandler.ts","../../src/siteMetadata.ts","../../src/embed.ts","../../src/nodeDetailManager.ts","../../src/some.ts","../../src/torus.ts","../../src/index.ts","../../src/asStream.ts","../../src/ComposedStore.ts","../../src/MergedStore.ts","../../src/transform.ts","../node_modules/through2/through2.js","../node_modules/@toruslabs/torus-embed/node_modules/fast-deep-equal/index.js","../../src/torusWalletAdapter.ts"],"names":["ObservableStore","initState","_state","this","_getState","newState","_putState","emit","partialState","state","getState","putState","handler","on","removeListener","isStream","stream","pipe","writable","_write","_writableState","readable","_read","_readableState","duplex","transform","_transform","module","exports","LOGIN_PROVIDER","WALLET_VERIFIERS","GOOGLE","FACEBOOK","TWITCH","REDDIT","DISCORD","EMAIL_PASSWORDLESS","WALLET_OPENLOGIN_VERIFIER_MAP","PAYMENT_PROVIDER","SUPPORTED_PAYMENT_NETWORK","TORUS_BUILD_ENV","BUTTON_POSITION","PROVIDER_SUPPORTED_FIAT_CURRENCIES","cryptoCompareCurrenciesSet","providerSupportedFiatCurrencies","currency","paymentProviders","line1","line2","line3","supportPage","minOrderValue","maxOrderValue","validCurrencies","supportedFiatCurrencies","validCryptoCurrenciesByChain","value","display","includeFees","api","enforceMax","receiveHint","sell","supportedVerifierList","Object","translations","en","embed","continue","actionRequired","pendingAction","cookiesRequired","enableCookies","clickHere","de","ja","ko","zh","prodTorusUrl","localStorageKeyPrefix","runOnLoad","fn","window","Promise","htmlToElement","html","template","trimmedHtml","handleEvent","handlerArgs","handlerWrapper","handle","handleStream","chunk","resolve","document","loglevel","errors","disconnected","permanentlyDisconnected","sendSiteMetadata","unsupportedSync","method","invalidDuplexStream","invalidOptions","maxEventListeners","shouldSendMetadata","invalidRequestArgs","invalidRequestMethod","invalidRequestParams","invalidLoggerObject","invalidLoggerMethod","info","connected","chainId","warnings","enableDeprecation","sendDeprecation","events","close","data","networkChanged","notification","publicConfigStore","createErrorMiddleware","req","res","message","next","done","error","log","logStreamDisconnectWarning","remoteLabel","emitter","warningMsg","getPreopenInstanceId","Math","getTorusUrl","version","versionUsed","integrity","buildEnv","config","get","useAPIKey","response","torusUrl","logLevel","getUserLanguage","userLanguage","userLanguages","EMITTED_NOTIFICATIONS","NOOP","FEATURES_PROVIDER_CHANGE_WINDOW","FEATURES_DEFAULT_WALLET_WINDOW","FEATURES_CONFIRM_WINDOW","SafeEventEmitter","getRpcPromiseCallback","unwrapResult","reject","Array","constructor","jsonRpcStreamName","enable","experimentalMethods","send","isDuplexStream","messages","TorusInpageProvider","mux","pump","storageKey","storeAsStream","jsonRpcConnection","createStreamMiddleware","rpcEngine","createIdRemapMiddleware","payload","params","type","isConnected","request","args","sendAsync","addListener","once","prependListener","prependOnceListener","_initializeState","networkVersion","accounts","isUnlocked","_rpcRequest","isInternal","cb","_payload","callback","methodOrPayload","callbackOrArgs","_sendSync","result","id","jsonrpc","_handleConnect","_handleDisconnect","errorMessage","_handleStreamDisconnect","_handleAccountsChanged","isEthAccounts","finalAccounts","dequal","_handleChainChanged","_handleUnlockStateChanged","_warnOfDeprecation","initialized","isPermanentlyDisconnected","hasEmittedConnection","hashes","internalHashes","options","algorithm","createHash","main","finalOptions","algorithms","delimiter","full","defaults","sri","undefined","output","features","target","dualScreenLeft","dualScreenTop","width","height","left","top","h","w","getPopupFeatures","_setupTimer","Number","setInterval","clearInterval","open","redirect","img","getSiteName","siteName","metaTitle","icon","imgExists","_icon","Boolean","getSiteMetadata","getSiteIcon","name","domainMetadata","engine","originalError","defaultVerifiers","iframeIntegrity","expectedCacheControlHeader","UNSAFE_METHODS","isLocalStorageAvailable","storage","x","e","storageAvailable","torusIframeHtml","check","hash","buttonPosition","modalZIndex","apiKey","configuration","metadataHost","allowHost","network","TorusJs","setAPIKey","init","enableLogging","enabledVerifiers","host","networkName","blockExplorer","ticker","tickerName","loginConfig","showTorusButton","skipTKey","useLocalStorage","useWalletConnect","dappStorageKey","localStorageKey","storedKey","generatedKey","torusIframeUrl","link","defaultLanguage","customTranslations","mergedTranslations","deepmerge","languageTranslations","handleSetup","documentReady","initStream","whiteLabel","torusWidgetVisibility","fetchUrl","fetch","cache","resp","calculatedIntegrity","generateIntegrity","login","verifier","login_hint","loginHint","logout","logOutStream","statusStream","status","cleanUp","clearInit","element","isElement","hideTorusButton","setProvider","rest","providerChangeStream","success","preopenInstanceId","override","showWallet","showWalletStream","finalPath","path","showWalletHandler","instanceId","finalUrl","url","walletWindow","getPublicAddress","isExtended","verifierId","nodeDetails","endpoints","torusNodePubs","walletVerifier","openloginVerifier","existingV1User","v2User","newV2User","getUserInfo","userInfoAccessStream","newRequest","userInfoStream","handlerChunk","initiateTopup","isValid","provider","selectedProvider","selectedParams","requestedOrderAmount","parseFloat","finalCryptoCurrency","validatePaymentProvider","JSON","topupStream","loginWithPrivateKey","userInfo","Buffer","loginPrivKeyStream","privateKey","showWalletConnectScanner","walletConnectStream","_handleWindow","windowStream","handledWindow","closeHandler","receivedId","closed","_setEmbedWhiteLabel","theme","isDark","colors","_getLogoUrl","logoUrl","logoLight","logoDark","_sendWidgetVisibilityStatus","torusWidgetVisibilityStream","_displayIframe","isFull","style","_setupWeb3","metamaskStream","targetWindow","targetOrigin","origin","communicationStream","inpageProvider","detectAccountRequestPrototypeModifier","m","originalMethod","setTimeout","handleLoginCb","requestedVerifier","_","proxiedInpageProvider","deleteProperty","communicationMux","setupMultiplex","widgetStream","_showLoginPopup","loginHandler","selectedAddress","oauthStream","calledFromEmbed","_createPopupBlockAlert","torusAlert","successAlert","btnContainer","ETHEREUM_NETWORK","abi","inputs","internalType","outputs","stateMutability","proxyAddress","NodeDetailManager","PROXY_ADDRESS_MAINNET","localUrl","projectId","Web3EthContract","_nodeDetails","currentEpoch","nodeListAddress","torusNodeEndpoints","torusNodePub","torusIndexes","updated","getNodeDetails","hashedVerifierId","keccak256","updatedEndpoints","updatedNodePub","index","endPointElement","pubKx","torusNodePubX","pubKy","torusNodePubY","endpoint","X","toHex","Y","predicate","Some","finishedCount","sharedState","resolved","errorArr","promises","resultArr","predicateError","acc","str","msg","it","responses","kCombinations","set","length","k","combs","tailCombs","i","j","thresholdSame","hashMap","arr","JsonStringify","keyLookup","lookupPromises","generateJsonRPCObject","verifier_id","err","lookupResults","lookupShares","x1","errorResult","x2","keyResult","x3","waitKeyLookup","keyAssign","lastPoint","nodeNum","initialPoint","firstPoint","post","headers","pubKeyX","pubKeyY","signedData","acceptedErrorMsgs","signerHost","createKeccakHash","enableOneKey","serverTimeOffset","getUserTypeAndAddress","doesKeyAssign","isNewKey","assignResult","finalKeyResult","pub_key_X","pub_key_Y","nonceResult","nonce","modifiedPubKey","y","finalX","finalY","address","typeOfUser","pubNonce","upgraded","setCustomKey","customKeyHex","torusKey","privKey","customKey","newMetadataNonce","retrieveShares","extraParams","promiseArr","verifierParams","tmpKey","generatePrivate","pubKey","getPublic","tokenCommitment","p","messageprefix","tokencommitment","temppubx","temppuby","verifieridentifier","completedRequests","promiseArrRequest","nodeSigs","encrypted","item","idtoken","nodesignatures","shareResponses","thresholdPublicKey","sharePromises","nodeIndexes","currentShareResponse","a","b","firstKey","metadata","ephemPublicKey","iv","mac","decrypt","ciphertext","indexes","sharesResolved","decryptedShares","allCombis","currentCombi","currentCombiShares","shares","indices","derivedPrivateKey","decryptedPubKey","decryptedPubKeyX","decryptedPubKeyY","metadataNonce","ethAddress","getMetadata","metadataResponse","generateMetadataParams","key","setData","timestamp","Date","sig","stringify","set_data","signature","setMetadata","lagrangeInterpolation","nodeIndex","secret","upper","lower","temp","delta","generateAddressFromPrivKey","publicKey","ethAddressLower","toChecksumAddress","generateAddressFromPubKey","publicKeyX","publicKeyY","getOrSetNonce","getOnly","getNonce","getPostboxKeyFrom1OutOf1","privKeyBN","nonceBN","v","setEmbedHost","isGetOrSetNonceError","ObservableStoreStream","obsStore","objectMode","resume","push","subscribe","dest","write","_encoding","_size","unsubscribe","Duplex","ComposedStore","children","_children","keys","forEach","childKey","child","_addChild","updateFromChild","childValue","MergedStore","_updateWholeState","childStates","map","assign","syncTransformFn","Transform","require","inherits","xtend","DestroyableTransform","opts","call","_destroyed","noop","enc","through2","construct","flush","prototype","destroy","self","process","nextTick","t2","_flush","ctor","Through2","obj","highWaterMark","equal","isArray","RegExp","source","flags","valueOf","toString","hasOwnProperty","WALLET_ADAPTERS","TORUS_EVM","ADAPTER_NAMESPACES","EIP155","CHAIN_NAMESPACES","ADAPTER_CATEGORY","EXTERNAL","ADAPTER_STATUS","NOT_READY","rpcTarget","parseInt","displayName","getChainConfig","ADAPTER_EVENTS","connect","WalletInitializationError","adapter","blockExplorerUrl","logo","updatedChainID","reconnected","rehydrated","WalletLoginError","disconnect","cleanup","setAdapterSettings"],"mappings":"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","file":"static/js/8.84df4cff.chunk.js","sourcesContent":["import SafeEventEmitter from '@metamask/safe-event-emitter';\n\nexport class ObservableStore<T> extends SafeEventEmitter {\n  private _state: T;\n\n  constructor(initState: T) {\n    super();\n    if (initState) {\n      this._state = initState;\n    } else {\n      // Typecast/default state: Preserve existing behavior\n      this._state = {} as unknown as T;\n    }\n  }\n\n  // wrapper around internal getState\n  getState(): T {\n    return this._getState();\n  }\n\n  // wrapper around internal putState\n  putState(newState: T): void {\n    this._putState(newState);\n    this.emit('update', newState);\n  }\n\n  updateState(partialState: Partial<T>): void {\n    // if non-null object, merge\n    if (partialState && typeof partialState === 'object') {\n      const state = this.getState();\n      this.putState({ ...state, ...partialState });\n      // if not object, use new value\n    } else {\n      this.putState(partialState);\n    }\n  }\n\n  // subscribe to changes\n  subscribe(handler: (state: T) => void): void {\n    this.on('update', handler);\n  }\n\n  // unsubscribe to changes\n  unsubscribe(handler: (state: T) => void): void {\n    this.removeListener('update', handler);\n  }\n\n  //\n  // private\n  //\n\n  // read from persistence\n  protected _getState(): T {\n    return this._state;\n  }\n\n  // write to persistence\n  protected _putState(newState: T): void {\n    this._state = newState;\n  }\n}\n","'use strict';\n\nconst isStream = stream =>\n\tstream !== null &&\n\ttypeof stream === 'object' &&\n\ttypeof stream.pipe === 'function';\n\nisStream.writable = stream =>\n\tisStream(stream) &&\n\tstream.writable !== false &&\n\ttypeof stream._write === 'function' &&\n\ttypeof stream._writableState === 'object';\n\nisStream.readable = stream =>\n\tisStream(stream) &&\n\tstream.readable !== false &&\n\ttypeof stream._read === 'function' &&\n\ttypeof stream._readableState === 'object';\n\nisStream.duplex = stream =>\n\tisStream.writable(stream) &&\n\tisStream.readable(stream);\n\nisStream.transform = stream =>\n\tisStream.duplex(stream) &&\n\ttypeof stream._transform === 'function';\n\nmodule.exports = isStream;\n","import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport Web3EthContract from 'web3-eth-contract';\nimport { keccak256, toHex } from 'web3-utils';\n\nconst ETHEREUM_NETWORK = {\n  ROPSTEN: \"ropsten\",\n  MAINNET: \"mainnet\",\n  POLYGON: \"polygon-mainnet\"\n};\nconst abi = [{\n  inputs: [{\n    internalType: \"string\",\n    name: \"_verifier\",\n    type: \"string\"\n  }, {\n    internalType: \"bytes32\",\n    name: \"hashedVerifierId\",\n    type: \"bytes32\"\n  }],\n  name: \"getNodeSet\",\n  outputs: [{\n    internalType: \"uint256\",\n    name: \"currentEpoch\",\n    type: \"uint256\"\n  }, {\n    internalType: \"string[]\",\n    name: \"torusNodeEndpoints\",\n    type: \"string[]\"\n  }, {\n    internalType: \"uint256[]\",\n    name: \"torusNodePubX\",\n    type: \"uint256[]\"\n  }, {\n    internalType: \"uint256[]\",\n    name: \"torusNodePubY\",\n    type: \"uint256[]\"\n  }, {\n    internalType: \"uint256[]\",\n    name: \"torusIndexes\",\n    type: \"uint256[]\"\n  }],\n  stateMutability: \"view\",\n  type: \"function\"\n}];\n\nclass NodeDetailManager {\n  constructor() {\n    let {\n      network = ETHEREUM_NETWORK.MAINNET,\n      proxyAddress = NodeDetailManager.PROXY_ADDRESS_MAINNET\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _defineProperty(this, \"_currentEpoch\", \"\");\n\n    _defineProperty(this, \"_torusNodeEndpoints\", []);\n\n    _defineProperty(this, \"_torusNodePub\", []);\n\n    _defineProperty(this, \"_torusIndexes\", []);\n\n    _defineProperty(this, \"nodeListAddress\", void 0);\n\n    _defineProperty(this, \"updated\", void 0);\n\n    _defineProperty(this, \"nodeListContract\", void 0);\n\n    let url;\n\n    try {\n      const localUrl = new URL(network);\n      url = localUrl.href;\n    } catch (_) {\n      const projectId = \"b8cdb0e4cff24599a286bf8e87ff1c96\";\n      url = \"https://\".concat(network, \".infura.io/v3/\").concat(projectId);\n    }\n\n    Web3EthContract.setProvider(url);\n    this.nodeListContract = new Web3EthContract(abi, proxyAddress);\n    this.nodeListAddress = proxyAddress;\n    this.updated = false;\n  }\n\n  get _nodeDetails() {\n    return {\n      currentEpoch: this._currentEpoch,\n      nodeListAddress: this.nodeListAddress,\n      torusNodeEndpoints: this._torusNodeEndpoints,\n      torusNodePub: this._torusNodePub,\n      torusIndexes: this._torusIndexes,\n      updated: this.updated\n    };\n  }\n\n  async getNodeDetails(_ref) {\n    let {\n      verifier,\n      verifierId\n    } = _ref;\n\n    try {\n      // Do this only for mainnet & testnet where the list is static irrespective of verifier, verifierId\n      if (this.updated && (this.nodeListAddress === NodeDetailManager.PROXY_ADDRESS_MAINNET || this.nodeListAddress === NodeDetailManager.PROXY_ADDRESS_ROPSTEN)) return this._nodeDetails;\n      const hashedVerifierId = keccak256(verifierId);\n      const nodeDetails = await this.nodeListContract.methods.getNodeSet(verifier, hashedVerifierId).call();\n      const {\n        currentEpoch,\n        torusNodeEndpoints,\n        torusNodePubX,\n        torusNodePubY,\n        torusIndexes\n      } = nodeDetails;\n      this._currentEpoch = currentEpoch;\n      this._torusIndexes = torusIndexes.map(x => Number(x));\n      const updatedEndpoints = [];\n      const updatedNodePub = [];\n\n      for (let index = 0; index < torusNodeEndpoints.length; index += 1) {\n        const endPointElement = torusNodeEndpoints[index];\n        const pubKx = torusNodePubX[index];\n        const pubKy = torusNodePubY[index];\n        const endpoint = \"https://\".concat(endPointElement.split(\":\")[0], \"/jrpc\");\n        updatedEndpoints.push(endpoint);\n        updatedNodePub.push({\n          X: toHex(pubKx).replace(\"0x\", \"\"),\n          Y: toHex(pubKy).replace(\"0x\", \"\")\n        });\n      }\n\n      this._torusNodeEndpoints = updatedEndpoints;\n      this._torusNodePub = updatedNodePub;\n      this.updated = true;\n      return this._nodeDetails;\n    } catch (error) {\n      if (this.nodeListAddress === NodeDetailManager.PROXY_ADDRESS_MAINNET) {\n        return NodeDetailManager.NODE_DETAILS_MAINNET;\n      }\n\n      throw error;\n    }\n  }\n\n}\n\n_defineProperty(NodeDetailManager, \"PROXY_ADDRESS_MAINNET\", \"0xf20336e16B5182637f09821c27BDe29b0AFcfe80\");\n\n_defineProperty(NodeDetailManager, \"PROXY_ADDRESS_ROPSTEN\", \"0x6258c9d6c12ed3edda59a1a6527e469517744aa7\");\n\n_defineProperty(NodeDetailManager, \"PROXY_ADDRESS_POLYGON\", \"0x9f072ba19b3370e512aa1b4bfcdaf97283168005\");\n\n_defineProperty(NodeDetailManager, \"NODE_DETAILS_MAINNET\", {\n  currentEpoch: \"19\",\n  nodeListAddress: NodeDetailManager.PROXY_ADDRESS_MAINNET,\n  torusNodeEndpoints: [\"https://torus-19.torusnode.com/jrpc\", \"https://torus-node.ens.domains/jrpc\", \"https://torus-node.matic.network/jrpc\", \"https://torus.zilliqa.network/jrpc\", \"https://torus-mainnet.cosmos.network/jrpc\", \"https://torus2.etherscan.com/jrpc\", \"https://torus-node-v2.skalelabs.com/jrpc\", \"https://torus-node.binancex.dev/jrpc\", \"https://torusnode.ont.io/jrpc\"],\n  torusIndexes: [1, 2, 3, 4, 5, 6, 7, 8, 9],\n  torusNodePub: [{\n    X: \"bbe83c64177c3775550e6ba6ac2bc059f6847d644c9e4894e42c60d7974d8c2b\",\n    Y: \"82b49a7caf70def38cdad2740af45c1e4f969650105c5019a29bb18b21a9acb5\"\n  }, {\n    X: \"c208cac4ef9a47d386097a9c915b28e9cb89213abee8d26a17198ee261201b0d\",\n    Y: \"c7db2fe4631109f40833de9dc78d07e35706549ee48fa557b33e4e75e1047873\"\n  }, {\n    X: \"ca1766bb426d4ca5582818a0c5439d560ea64f5baa060793ab29dd3d0ceacfe\",\n    Y: \"d46c1d08c40e1306e1bca328c2287b8268166b11a1ba4b8442ea2ad0c5e32152\"\n  }, {\n    X: \"c3934dd2f6f4b3d2e1e398cc501e143c1e1a381b52feb6d1525af34d16253768\",\n    Y: \"71f5141a5035799099f5ea3e241e66946bc55dc857ac3bd7d6fcdb8dcd3eeeef\"\n  }, {\n    X: \"22e66f1929631d00bf026227581597f085fd94fd952fc0dca9f0833398b5c064\",\n    Y: \"6088b3912e10a1e9d50355a609c10db7d188f16a2e2fd7357e51bf4f6a74f0a1\"\n  }, {\n    X: \"9dc9fa410f3ce9eb70df70cdea00a49f2c4cc7a31c08c0dab5f863ed35ff5139\",\n    Y: \"627a291cb87a75c61da3f65d6818e1e05e360217179817ed27e8c73bca7ec122\"\n  }, {\n    X: \"118b9fc07e97b096d899b9f6658463ce6a8caa64038e37fc969df4e6023dd8c6\",\n    Y: \"baf9fa4e51770f4796ea165dd03a769b8606681a38954a0a92c4cbffd6609ce9\"\n  }, {\n    X: \"8a6d8b925da15a273dec3d8f8395ec35cd6878f274b2b180e4e106999db64043\",\n    Y: \"96f67f870c157743da0b1eb84d89bf30500d74dc84c11f501ee1cb013acc8c46\"\n  }, {\n    X: \"39cecb62e863729f572f7dfc46c24867981bf04bb405fed0df39e33984bfade5\",\n    Y: \"61c2364434012e68a2be2e9952805037e52629d7762fafc8e10e9fb5bad8f790\"\n  }],\n  updated: false\n});\n\nexport { ETHEREUM_NETWORK, abi, NodeDetailManager as default };\n//# sourceMappingURL=fetchNodeDetails.esm.js.map\n",null,null,null,"import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { generatePrivate, getPublic, decrypt } from '@toruslabs/eccrypto';\nimport { post, generateJsonRPCObject, setAPIKey, setEmbedHost, get } from '@toruslabs/http-helpers';\nimport BN from 'bn.js';\nimport { ec } from 'elliptic';\nimport JsonStringify from 'json-stable-stringify';\nimport { toChecksumAddress } from 'web3-utils';\nimport loglevel from 'loglevel';\nimport createKeccakHash from 'keccak';\n\nconst log = loglevel.getLogger(\"torus.js\");\nlog.disableAll();\n\nfunction capitalizeFirstLetter(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nclass SomeError extends Error {\n  constructor(_ref) {\n    let {\n      errors,\n      responses,\n      predicate\n    } = _ref;\n    super(\"Unable to resolve enough promises.\");\n\n    _defineProperty(this, \"errors\", void 0);\n\n    _defineProperty(this, \"responses\", void 0);\n\n    _defineProperty(this, \"predicate\", void 0);\n\n    this.errors = errors;\n    this.responses = responses;\n    this.predicate = predicate;\n  }\n\n}\nconst Some = (promises, predicate) => new Promise((resolve, reject) => {\n  let finishedCount = 0;\n  const sharedState = {\n    resolved: false\n  };\n  const errorArr = new Array(promises.length).fill(undefined);\n  const resultArr = new Array(promises.length).fill(undefined);\n  let predicateError;\n  return promises.forEach((x, index) => {\n    return x.then(resp => {\n      resultArr[index] = resp;\n      return undefined;\n    }).catch(error => {\n      errorArr[index] = error;\n    }) // eslint-disable-next-line promise/no-return-in-finally\n    .finally(() => {\n      if (sharedState.resolved) return;\n      return predicate(resultArr.slice(0), sharedState).then(data => {\n        sharedState.resolved = true;\n        resolve(data);\n        return undefined;\n      }).catch(error => {\n        // log only the last predicate error\n        predicateError = error;\n      }).finally(() => {\n        finishedCount += 1;\n\n        if (finishedCount === promises.length) {\n          const errors = Object.values(resultArr.reduce((acc, z) => {\n            if (z) {\n              var _error$data;\n\n              const {\n                id,\n                error\n              } = z;\n\n              if ((error === null || error === void 0 ? void 0 : (_error$data = error.data) === null || _error$data === void 0 ? void 0 : _error$data.length) > 0) {\n                if (error.data.startsWith(\"Error occurred while verifying params\")) acc[id] = capitalizeFirstLetter(error.data);else acc[id] = error.data;\n              }\n            }\n\n            return acc;\n          }, {}));\n\n          if (errors.length > 0) {\n            // Format-able errors\n            const msg = errors.length > 1 ? `\\n${errors.map(it => `• ${it}`).join(\"\\n\")}` : errors[0];\n            reject(new Error(msg));\n          } else {\n            var _predicateError;\n\n            reject(new SomeError({\n              errors: errorArr,\n              responses: resultArr,\n              predicate: ((_predicateError = predicateError) === null || _predicateError === void 0 ? void 0 : _predicateError.message) || predicateError\n            }));\n          }\n        }\n      });\n    });\n  });\n});\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nclass GetOrSetNonceError extends Error {}\nconst kCombinations = (s, k) => {\n  let set = s;\n\n  if (typeof set === \"number\") {\n    set = Array.from({\n      length: set\n    }, (_, i) => i);\n  }\n\n  if (k > set.length || k <= 0) {\n    return [];\n  }\n\n  if (k === set.length) {\n    return [set];\n  }\n\n  if (k === 1) {\n    return set.reduce((acc, cur) => [...acc, [cur]], []);\n  }\n\n  const combs = [];\n  let tailCombs = [];\n\n  for (let i = 0; i <= set.length - k + 1; i += 1) {\n    tailCombs = kCombinations(set.slice(i + 1), k - 1);\n\n    for (let j = 0; j < tailCombs.length; j += 1) {\n      combs.push([set[i], ...tailCombs[j]]);\n    }\n  }\n\n  return combs;\n};\nconst thresholdSame = (arr, t) => {\n  const hashMap = {};\n\n  for (let i = 0; i < arr.length; i += 1) {\n    const str = JsonStringify(arr[i]);\n    hashMap[str] = hashMap[str] ? hashMap[str] + 1 : 1;\n\n    if (hashMap[str] === t) {\n      return arr[i];\n    }\n  }\n\n  return undefined;\n};\nconst keyLookup = async (endpoints, verifier, verifierId) => {\n  const lookupPromises = endpoints.map(x => post(x, generateJsonRPCObject(\"VerifierLookupRequest\", {\n    verifier,\n    verifier_id: verifierId.toString()\n  })).catch(err => log.error(\"lookup request failed\", err)));\n  return Some(lookupPromises, lookupResults => {\n    const lookupShares = lookupResults.filter(x1 => x1);\n    const errorResult = thresholdSame(lookupShares.map(x2 => x2 && x2.error), ~~(endpoints.length / 2) + 1);\n    const keyResult = thresholdSame(lookupShares.map(x3 => x3 && x3.result), ~~(endpoints.length / 2) + 1);\n\n    if (keyResult || errorResult) {\n      return Promise.resolve({\n        keyResult,\n        errorResult\n      });\n    }\n\n    return Promise.reject(new Error(`invalid results ${JSON.stringify(lookupResults)}`));\n  });\n};\nconst waitKeyLookup = (endpoints, verifier, verifierId, timeout) => new Promise((resolve, reject) => {\n  setTimeout(() => {\n    keyLookup(endpoints, verifier, verifierId).then(resolve).catch(reject);\n  }, timeout);\n});\nconst keyAssign = async _ref => {\n  let {\n    endpoints,\n    torusNodePubs,\n    lastPoint,\n    firstPoint,\n    verifier,\n    verifierId,\n    signerHost,\n    network\n  } = _ref;\n  let nodeNum;\n  let initialPoint;\n\n  if (lastPoint === undefined) {\n    nodeNum = Math.floor(Math.random() * endpoints.length);\n    initialPoint = nodeNum;\n  } else {\n    nodeNum = lastPoint % endpoints.length;\n  }\n\n  if (nodeNum === firstPoint) throw new Error(\"Looped through all\");\n  if (firstPoint !== undefined) initialPoint = firstPoint;\n  const data = generateJsonRPCObject(\"KeyAssign\", {\n    verifier,\n    verifier_id: verifierId.toString()\n  });\n\n  try {\n    const signedData = await post(signerHost, data, {\n      headers: {\n        pubKeyX: torusNodePubs[nodeNum].X,\n        pubKeyY: torusNodePubs[nodeNum].Y,\n        network\n      }\n    }, {\n      useAPIKey: true\n    });\n    return await post(endpoints[nodeNum], _objectSpread$1(_objectSpread$1({}, data), signedData), {\n      headers: {\n        \"Content-Type\": \"application/json; charset=utf-8\"\n      }\n    });\n  } catch (error) {\n    log.error(error);\n    const acceptedErrorMsgs = [// Slow node\n    \"Timed out\", // Happens when the node is not reachable (dns issue etc)\n    \"TypeError: Failed to fetch\", \"TypeError: cancelled\", \"TypeError: NetworkError when attempting to fetch resource.\" // Firefox\n    ];\n    if (acceptedErrorMsgs.includes(error.message)) return keyAssign({\n      endpoints,\n      torusNodePubs,\n      lastPoint: nodeNum + 1,\n      firstPoint: initialPoint,\n      verifier,\n      verifierId,\n      signerHost,\n      network\n    });\n    throw new Error(`Sorry, the Torus Network that powers Web3Auth is currently very busy.\n    We will generate your key in time. Pls try again later. \\n\n    ${error.message || \"\"}`);\n  }\n};\nfunction keccak256(a) {\n  const hash = createKeccakHash(\"keccak256\").update(a).digest().toString(\"hex\");\n  return `0x${hash}`;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n// of Torus nodes to handle malicious node responses\n\nclass Torus {\n  constructor() {\n    let {\n      enableOneKey = false,\n      metadataHost = \"https://metadata.tor.us\",\n      allowHost = \"https://signer.tor.us/api/allow\",\n      signerHost = \"https://signer.tor.us/api/sign\",\n      serverTimeOffset = 0,\n      network = \"mainnet\"\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _defineProperty(this, \"metadataHost\", void 0);\n\n    _defineProperty(this, \"allowHost\", void 0);\n\n    _defineProperty(this, \"serverTimeOffset\", void 0);\n\n    _defineProperty(this, \"enableOneKey\", void 0);\n\n    _defineProperty(this, \"signerHost\", void 0);\n\n    _defineProperty(this, \"network\", void 0);\n\n    _defineProperty(this, \"ec\", void 0);\n\n    this.ec = new ec(\"secp256k1\");\n    this.metadataHost = metadataHost;\n    this.allowHost = allowHost;\n    this.enableOneKey = enableOneKey;\n    this.serverTimeOffset = serverTimeOffset || 0; // ms\n\n    this.signerHost = signerHost;\n    this.network = network;\n  }\n\n  static enableLogging() {\n    let v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (v) log.enableAll();else log.disableAll();\n  }\n\n  static setAPIKey(apiKey) {\n    setAPIKey(apiKey);\n  }\n\n  static setEmbedHost(embedHost) {\n    setEmbedHost(embedHost);\n  }\n\n  static isGetOrSetNonceError(err) {\n    return err instanceof GetOrSetNonceError;\n  }\n  /**\n   * Note: use this function only for openlogin tkey account lookups.\n   */\n\n\n  async getUserTypeAndAddress(endpoints, torusNodePubs, _ref) {\n    let {\n      verifier,\n      verifierId\n    } = _ref;\n    let doesKeyAssign = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    const {\n      keyResult,\n      errorResult\n    } = (await keyLookup(endpoints, verifier, verifierId)) || {};\n    let isNewKey = false;\n    let finalKeyResult;\n\n    if (errorResult && JSON.stringify(errorResult).includes(\"Verifier + VerifierID has not yet been assigned\")) {\n      if (!doesKeyAssign) {\n        throw new Error(\"Verifier + VerifierID has not yet been assigned\");\n      }\n\n      await keyAssign({\n        endpoints,\n        torusNodePubs,\n        lastPoint: undefined,\n        firstPoint: undefined,\n        verifier,\n        verifierId,\n        signerHost: this.signerHost,\n        network: this.network\n      });\n      const assignResult = await waitKeyLookup(endpoints, verifier, verifierId, 1000);\n      finalKeyResult = assignResult === null || assignResult === void 0 ? void 0 : assignResult.keyResult;\n      isNewKey = true;\n    } else if (keyResult) {\n      finalKeyResult = keyResult;\n    } else {\n      throw new Error(`node results do not match at first lookup ${JSON.stringify(keyResult || {})}, ${JSON.stringify(errorResult || {})}`);\n    }\n\n    if (finalKeyResult) {\n      const {\n        pub_key_X: X,\n        pub_key_Y: Y\n      } = finalKeyResult.keys[0];\n      let nonceResult;\n      let nonce;\n      let modifiedPubKey;\n\n      try {\n        nonceResult = await this.getOrSetNonce(X, Y, undefined, !isNewKey);\n        nonce = new BN(nonceResult.nonce || \"0\", 16);\n      } catch {\n        throw new GetOrSetNonceError();\n      }\n\n      if (nonceResult.typeOfUser === \"v1\") {\n        modifiedPubKey = this.ec.keyFromPublic({\n          x: X,\n          y: Y\n        }).getPublic().add(this.ec.keyFromPrivate(nonce.toString(16)).getPublic());\n      } else if (nonceResult.typeOfUser === \"v2\") {\n        modifiedPubKey = this.ec.keyFromPublic({\n          x: X,\n          y: Y\n        }).getPublic().add(this.ec.keyFromPublic({\n          x: nonceResult.pubNonce.x,\n          y: nonceResult.pubNonce.y\n        }).getPublic());\n      } else {\n        throw new Error(\"getOrSetNonce should always return typeOfUser.\");\n      }\n\n      const finalX = modifiedPubKey.getX().toString(16);\n      const finalY = modifiedPubKey.getY().toString(16);\n      const address = this.generateAddressFromPubKey(modifiedPubKey.getX(), modifiedPubKey.getY());\n      if (nonceResult.typeOfUser === \"v1\") return {\n        typeOfUser: nonceResult.typeOfUser,\n        nonce,\n        X: finalX,\n        Y: finalY,\n        address\n      };else if (nonceResult.typeOfUser === \"v2\") {\n        return {\n          typeOfUser: nonceResult.typeOfUser,\n          nonce,\n          pubNonce: nonceResult.pubNonce,\n          upgraded: nonceResult.upgraded,\n          X: finalX,\n          Y: finalY,\n          address\n        };\n      }\n    }\n\n    throw new Error(`node results do not match at final lookup ${JSON.stringify(keyResult || {})}, ${JSON.stringify(errorResult || {})}`);\n  }\n\n  async setCustomKey(_ref2) {\n    let {\n      privKeyHex,\n      metadataNonce,\n      torusKeyHex,\n      customKeyHex\n    } = _ref2;\n    let torusKey;\n\n    if (torusKeyHex) {\n      torusKey = new BN(torusKeyHex, 16);\n    } else {\n      const privKey = new BN(privKeyHex, 16);\n      torusKey = privKey.sub(metadataNonce).umod(this.ec.curve.n);\n    }\n\n    const customKey = new BN(customKeyHex, 16);\n    const newMetadataNonce = customKey.sub(torusKey).umod(this.ec.curve.n);\n    const data = this.generateMetadataParams(newMetadataNonce.toString(16), torusKey);\n    await this.setMetadata(data);\n  }\n\n  async retrieveShares(endpoints, indexes, verifier, verifierParams, idToken) {\n    let extraParams = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    const promiseArr = [];\n    await get(this.allowHost, {\n      headers: {\n        verifier,\n        verifier_id: verifierParams.verifier_id,\n        network: this.network\n      }\n    }, {\n      useAPIKey: true\n    });\n    /*\n      CommitmentRequestParams struct {\n        MessagePrefix      string `json:\"messageprefix\"`\n        TokenCommitment    string `json:\"tokencommitment\"`\n        TempPubX           string `json:\"temppubx\"`\n        TempPubY           string `json:\"temppuby\"`\n        VerifierIdentifier string `json:\"verifieridentifier\"`\n      }\n      */\n    // generate temporary private and public key that is used to secure receive shares\n\n    const tmpKey = generatePrivate();\n    const pubKey = getPublic(tmpKey).toString(\"hex\");\n    const pubKeyX = pubKey.slice(2, 66);\n    const pubKeyY = pubKey.slice(66);\n    const tokenCommitment = keccak256(idToken); // make commitment requests to endpoints\n\n    for (let i = 0; i < endpoints.length; i += 1) {\n      const p = post(endpoints[i], generateJsonRPCObject(\"CommitmentRequest\", {\n        messageprefix: \"mug00\",\n        tokencommitment: tokenCommitment.slice(2),\n        temppubx: pubKeyX,\n        temppuby: pubKeyY,\n        verifieridentifier: verifier\n      })).catch(err => {\n        log.error(\"commitment\", err);\n      });\n      promiseArr.push(p);\n    }\n    /*\n      ShareRequestParams struct {\n        Item []bijson.RawMessage `json:\"item\"`\n      }\n      ShareRequestItem struct {\n        IDToken            string          `json:\"idtoken\"`\n        NodeSignatures     []NodeSignature `json:\"nodesignatures\"`\n        VerifierIdentifier string          `json:\"verifieridentifier\"`\n      }\n      NodeSignature struct {\n        Signature   string\n        Data        string\n        NodePubKeyX string\n        NodePubKeyY string\n      }\n      CommitmentRequestResult struct {\n        Signature string `json:\"signature\"`\n        Data      string `json:\"data\"`\n        NodePubX  string `json:\"nodepubx\"`\n        NodePubY  string `json:\"nodepuby\"`\n      }\n      */\n    // send share request once k + t number of commitment requests have completed\n\n\n    return Some(promiseArr, resultArr => {\n      const completedRequests = resultArr.filter(x => {\n        if (!x || typeof x !== \"object\") {\n          return false;\n        }\n\n        if (x.error) {\n          return false;\n        }\n\n        return true;\n      });\n\n      if (completedRequests.length >= ~~(endpoints.length / 4) * 3 + 1) {\n        return Promise.resolve(resultArr);\n      }\n\n      return Promise.reject(new Error(`invalid ${JSON.stringify(resultArr)}`));\n    }).then(responses => {\n      const promiseArrRequest = [];\n      const nodeSigs = [];\n\n      for (let i = 0; i < responses.length; i += 1) {\n        if (responses[i]) nodeSigs.push(responses[i].result);\n      }\n\n      for (let i = 0; i < endpoints.length; i += 1) {\n        // eslint-disable-next-line promise/no-nesting\n        const p = post(endpoints[i], generateJsonRPCObject(\"ShareRequest\", {\n          encrypted: \"yes\",\n          item: [_objectSpread(_objectSpread({}, verifierParams), {}, {\n            idtoken: idToken,\n            nodesignatures: nodeSigs,\n            verifieridentifier: verifier\n          }, extraParams)]\n        })).catch(err => log.error(\"share req\", err));\n        promiseArrRequest.push(p);\n      }\n\n      return Some(promiseArrRequest, async (shareResponses, sharedState) => {\n        /*\n            ShareRequestResult struct {\n              Keys []KeyAssignment\n            }\n                    / KeyAssignmentPublic -\n            type KeyAssignmentPublic struct {\n              Index     big.Int\n              PublicKey common.Point\n              Threshold int\n              Verifiers map[string][]string // Verifier => VerifierID\n            }\n                   // KeyAssignment -\n            type KeyAssignment struct {\n              KeyAssignmentPublic\n              Share big.Int // Or Si\n            }\n          */\n        // check if threshold number of nodes have returned the same user public key\n        const completedRequests = shareResponses.filter(x => x);\n        const thresholdPublicKey = thresholdSame(shareResponses.map(x => x && x.result && x.result.keys[0].PublicKey), ~~(endpoints.length / 2) + 1); // optimistically run lagrange interpolation once threshold number of shares have been received\n        // this is matched against the user public key to ensure that shares are consistent\n\n        if (completedRequests.length >= ~~(endpoints.length / 2) + 1 && thresholdPublicKey) {\n          const sharePromises = [];\n          const nodeIndexes = [];\n\n          for (let i = 0; i < shareResponses.length; i += 1) {\n            var _currentShareResponse, _currentShareResponse2;\n\n            const currentShareResponse = shareResponses[i];\n\n            if ((currentShareResponse === null || currentShareResponse === void 0 ? void 0 : (_currentShareResponse = currentShareResponse.result) === null || _currentShareResponse === void 0 ? void 0 : (_currentShareResponse2 = _currentShareResponse.keys) === null || _currentShareResponse2 === void 0 ? void 0 : _currentShareResponse2.length) > 0) {\n              currentShareResponse.result.keys.sort((a, b) => new BN(a.Index, 16).cmp(new BN(b.Index, 16)));\n              const firstKey = currentShareResponse.result.keys[0];\n\n              if (firstKey.Metadata) {\n                const metadata = {\n                  ephemPublicKey: Buffer.from(firstKey.Metadata.ephemPublicKey, \"hex\"),\n                  iv: Buffer.from(firstKey.Metadata.iv, \"hex\"),\n                  mac: Buffer.from(firstKey.Metadata.mac, \"hex\") // mode: Buffer.from(firstKey.Metadata.mode, \"hex\"),\n\n                };\n                sharePromises.push( // eslint-disable-next-line promise/no-nesting\n                decrypt(tmpKey, _objectSpread(_objectSpread({}, metadata), {}, {\n                  ciphertext: Buffer.from(Buffer.from(firstKey.Share, \"base64\").toString(\"binary\").padStart(64, \"0\"), \"hex\")\n                })).catch(err => log.debug(\"share decryption\", err)));\n              } else {\n                sharePromises.push(Promise.resolve(Buffer.from(firstKey.Share.padStart(64, \"0\"), \"hex\")));\n              }\n            } else {\n              sharePromises.push(Promise.resolve(undefined));\n            }\n\n            nodeIndexes.push(new BN(indexes[i], 16));\n          }\n\n          const sharesResolved = await Promise.all(sharePromises);\n          if (sharedState.resolved) return undefined;\n          const decryptedShares = sharesResolved.reduce((acc, curr, index) => {\n            if (curr) acc.push({\n              index: nodeIndexes[index],\n              value: new BN(curr)\n            });\n            return acc;\n          }, []); // run lagrange interpolation on all subsets, faster in the optimistic scenario than berlekamp-welch due to early exit\n\n          const allCombis = kCombinations(decryptedShares.length, ~~(endpoints.length / 2) + 1);\n          let privateKey = null;\n\n          for (let j = 0; j < allCombis.length; j += 1) {\n            const currentCombi = allCombis[j];\n            const currentCombiShares = decryptedShares.filter((v, index) => currentCombi.includes(index));\n            const shares = currentCombiShares.map(x => x.value);\n            const indices = currentCombiShares.map(x => x.index);\n            const derivedPrivateKey = this.lagrangeInterpolation(shares, indices);\n            if (!derivedPrivateKey) continue;\n            const decryptedPubKey = getPublic(Buffer.from(derivedPrivateKey.toString(16, 64), \"hex\")).toString(\"hex\");\n            const decryptedPubKeyX = decryptedPubKey.slice(2, 66);\n            const decryptedPubKeyY = decryptedPubKey.slice(66);\n\n            if (new BN(decryptedPubKeyX, 16).cmp(new BN(thresholdPublicKey.X, 16)) === 0 && new BN(decryptedPubKeyY, 16).cmp(new BN(thresholdPublicKey.Y, 16)) === 0) {\n              privateKey = derivedPrivateKey;\n              break;\n            }\n          }\n\n          if (privateKey === undefined || privateKey === null) {\n            throw new Error(\"could not derive private key\");\n          }\n\n          return privateKey;\n        }\n\n        throw new Error(\"invalid\");\n      });\n    }).then(async returnedKey => {\n      let privateKey = returnedKey;\n      if (!privateKey) throw new Error(\"Invalid private key returned\");\n      const decryptedPubKey = getPublic(Buffer.from(privateKey.toString(16, 64), \"hex\")).toString(\"hex\");\n      const decryptedPubKeyX = decryptedPubKey.slice(2, 66);\n      const decryptedPubKeyY = decryptedPubKey.slice(66);\n      let metadataNonce;\n\n      if (this.enableOneKey) {\n        const {\n          nonce\n        } = await this.getNonce(decryptedPubKeyX, decryptedPubKeyY, privateKey);\n        metadataNonce = new BN(nonce || \"0\", 16);\n      } else {\n        metadataNonce = await this.getMetadata({\n          pub_key_X: decryptedPubKeyX,\n          pub_key_Y: decryptedPubKeyY\n        });\n      }\n\n      log.debug(\"> torus.js/retrieveShares\", {\n        privKey: privateKey.toString(16),\n        metadataNonce: metadataNonce.toString(16)\n      });\n      privateKey = privateKey.add(metadataNonce).umod(this.ec.curve.n);\n      const ethAddress = this.generateAddressFromPrivKey(privateKey);\n      log.debug(\"> torus.js/retrieveShares\", {\n        ethAddress,\n        privKey: privateKey.toString(16)\n      }); // return reconstructed private key and ethereum address\n\n      return {\n        ethAddress,\n        privKey: privateKey.toString(\"hex\", 64),\n        metadataNonce\n      };\n    });\n  }\n\n  async getMetadata(data) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    try {\n      const metadataResponse = await post(`${this.metadataHost}/get`, data, options, {\n        useAPIKey: true\n      });\n\n      if (!metadataResponse || !metadataResponse.message) {\n        return new BN(0);\n      }\n\n      return new BN(metadataResponse.message, 16); // nonce\n    } catch (error) {\n      log.error(\"get metadata error\", error);\n      return new BN(0);\n    }\n  }\n\n  generateMetadataParams(message, privateKey) {\n    const key = this.ec.keyFromPrivate(privateKey.toString(\"hex\", 64));\n    const setData = {\n      data: message,\n      timestamp: new BN(~~(this.serverTimeOffset + Date.now() / 1000)).toString(16)\n    };\n    const sig = key.sign(keccak256(JsonStringify(setData)).slice(2));\n    return {\n      pub_key_X: key.getPublic().getX().toString(\"hex\"),\n      pub_key_Y: key.getPublic().getY().toString(\"hex\"),\n      set_data: setData,\n      signature: Buffer.from(sig.r.toString(16, 64) + sig.s.toString(16, 64) + new BN(\"\").toString(16, 2), \"hex\").toString(\"base64\")\n    };\n  }\n\n  async setMetadata(data) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    try {\n      const metadataResponse = await post(`${this.metadataHost}/set`, data, options, {\n        useAPIKey: true\n      });\n      return metadataResponse.message; // IPFS hash\n    } catch (error) {\n      log.error(\"set metadata error\", error);\n      return \"\";\n    }\n  }\n\n  lagrangeInterpolation(shares, nodeIndex) {\n    if (shares.length !== nodeIndex.length) {\n      return null;\n    }\n\n    let secret = new BN(0);\n\n    for (let i = 0; i < shares.length; i += 1) {\n      let upper = new BN(1);\n      let lower = new BN(1);\n\n      for (let j = 0; j < shares.length; j += 1) {\n        if (i !== j) {\n          upper = upper.mul(nodeIndex[j].neg());\n          upper = upper.umod(this.ec.curve.n);\n          let temp = nodeIndex[i].sub(nodeIndex[j]);\n          temp = temp.umod(this.ec.curve.n);\n          lower = lower.mul(temp).umod(this.ec.curve.n);\n        }\n      }\n\n      let delta = upper.mul(lower.invm(this.ec.curve.n)).umod(this.ec.curve.n);\n      delta = delta.mul(shares[i]).umod(this.ec.curve.n);\n      secret = secret.add(delta);\n    }\n\n    return secret.umod(this.ec.curve.n);\n  }\n\n  generateAddressFromPrivKey(privateKey) {\n    const key = this.ec.keyFromPrivate(privateKey.toString(\"hex\", 64), \"hex\");\n    const publicKey = key.getPublic().encode(\"hex\", false).slice(2);\n    log.info(publicKey, \"public key\");\n    const ethAddressLower = `0x${keccak256(Buffer.from(publicKey, \"hex\")).slice(64 - 38)}`;\n    return toChecksumAddress(ethAddressLower);\n  }\n\n  generateAddressFromPubKey(publicKeyX, publicKeyY) {\n    const key = this.ec.keyFromPublic({\n      x: publicKeyX.toString(\"hex\", 64),\n      y: publicKeyY.toString(\"hex\", 64)\n    });\n    const publicKey = key.getPublic().encode(\"hex\", false).slice(2);\n    log.info(key.getPublic().encode(\"hex\", false), \"public key\");\n    const ethAddressLower = `0x${keccak256(Buffer.from(publicKey, \"hex\")).slice(64 - 38)}`;\n    return toChecksumAddress(ethAddressLower);\n  }\n  /**\n   * Note: use this function only with custom auth, don't use to lookup openlogin accounts.\n   */\n\n\n  async getPublicAddress(endpoints, torusNodePubs, _ref3) {\n    let {\n      verifier,\n      verifierId\n    } = _ref3;\n    let isExtended = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    log.debug(\"> torus.js/getPublicAddress\", {\n      endpoints,\n      torusNodePubs,\n      verifier,\n      verifierId,\n      isExtended\n    });\n    let finalKeyResult;\n    let isNewKey = false;\n    const {\n      keyResult,\n      errorResult\n    } = (await keyLookup(endpoints, verifier, verifierId)) || {};\n\n    if (errorResult && JSON.stringify(errorResult).includes(\"Verifier not supported\")) {\n      // change error msg\n      throw new Error(`Verifier not supported. Check if you: \\n\n      1. Are on the right network (Torus testnet/mainnet) \\n\n      2. Have setup a verifier on dashboard.web3auth.io?`);\n    } else if (errorResult && JSON.stringify(errorResult).includes(\"Verifier + VerifierID has not yet been assigned\")) {\n      await keyAssign({\n        endpoints,\n        torusNodePubs,\n        lastPoint: undefined,\n        firstPoint: undefined,\n        verifier,\n        verifierId,\n        signerHost: this.signerHost,\n        network: this.network\n      });\n      const assignResult = await waitKeyLookup(endpoints, verifier, verifierId, 1000);\n      finalKeyResult = assignResult === null || assignResult === void 0 ? void 0 : assignResult.keyResult;\n      isNewKey = true;\n    } else if (keyResult) {\n      finalKeyResult = keyResult;\n    } else {\n      throw new Error(`node results do not match at first lookup ${JSON.stringify(keyResult || {})}, ${JSON.stringify(errorResult || {})}`);\n    }\n\n    log.debug(\"> torus.js/getPublicAddress\", {\n      finalKeyResult,\n      isNewKey\n    });\n\n    if (finalKeyResult) {\n      var _nonce;\n\n      let {\n        pub_key_X: X,\n        pub_key_Y: Y\n      } = finalKeyResult.keys[0];\n      let nonceResult;\n      let nonce;\n      let modifiedPubKey;\n      let typeOfUser;\n      let pubNonce;\n\n      if (this.enableOneKey) {\n        try {\n          nonceResult = await this.getOrSetNonce(X, Y, undefined, !isNewKey);\n          nonce = new BN(nonceResult.nonce || \"0\", 16);\n          typeOfUser = nonceResult.typeOfUser;\n        } catch {\n          throw new GetOrSetNonceError();\n        }\n\n        if (nonceResult.typeOfUser === \"v1\") {\n          modifiedPubKey = this.ec.keyFromPublic({\n            x: X,\n            y: Y\n          }).getPublic().add(this.ec.keyFromPrivate(nonce.toString(16)).getPublic());\n        } else if (nonceResult.typeOfUser === \"v2\") {\n          if (nonceResult.upgraded) {\n            // OneKey is upgraded to 2/n, returned address is address of Torus key (postbox key), not tKey\n            modifiedPubKey = this.ec.keyFromPublic({\n              x: X,\n              y: Y\n            }).getPublic();\n          } else {\n            modifiedPubKey = this.ec.keyFromPublic({\n              x: X,\n              y: Y\n            }).getPublic().add(this.ec.keyFromPublic({\n              x: nonceResult.pubNonce.x,\n              y: nonceResult.pubNonce.y\n            }).getPublic());\n            pubNonce = nonceResult.pubNonce;\n          }\n        } else {\n          throw new Error(\"getOrSetNonce should always return typeOfUser.\");\n        }\n      } else {\n        typeOfUser = \"v1\";\n        nonce = await this.getMetadata({\n          pub_key_X: X,\n          pub_key_Y: Y\n        });\n        modifiedPubKey = this.ec.keyFromPublic({\n          x: X,\n          y: Y\n        }).getPublic().add(this.ec.keyFromPrivate(nonce.toString(16)).getPublic());\n      }\n\n      X = modifiedPubKey.getX().toString(16);\n      Y = modifiedPubKey.getY().toString(16);\n      const address = this.generateAddressFromPubKey(modifiedPubKey.getX(), modifiedPubKey.getY());\n      log.debug(\"> torus.js/getPublicAddress\", {\n        X,\n        Y,\n        address,\n        typeOfUser,\n        nonce: (_nonce = nonce) === null || _nonce === void 0 ? void 0 : _nonce.toString(16),\n        pubNonce\n      });\n      if (!isExtended) return address;\n      return {\n        typeOfUser,\n        address,\n        X,\n        Y,\n        metadataNonce: nonce,\n        pubNonce\n      };\n    }\n\n    throw new Error(`node results do not match at final lookup ${JSON.stringify(keyResult || {})}, ${JSON.stringify(errorResult || {})}`);\n  }\n  /**\n   * Internal functions for OneKey (OpenLogin v2), only call these functions if you know what you're doing\n   */\n\n\n  async getOrSetNonce(X, Y, privKey) {\n    let getOnly = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    let data;\n    const msg = getOnly ? \"getNonce\" : \"getOrSetNonce\";\n\n    if (privKey) {\n      data = this.generateMetadataParams(msg, privKey);\n    } else {\n      data = {\n        pub_key_X: X,\n        pub_key_Y: Y,\n        set_data: {\n          data: msg\n        }\n      };\n    }\n\n    return post(`${this.metadataHost}/get_or_set_nonce`, data, undefined, {\n      useAPIKey: true\n    });\n  }\n\n  async getNonce(X, Y, privKey) {\n    return this.getOrSetNonce(X, Y, privKey, true);\n  }\n\n  getPostboxKeyFrom1OutOf1(privKey, nonce) {\n    const privKeyBN = new BN(privKey, 16);\n    const nonceBN = new BN(nonce, 16);\n    return privKeyBN.sub(nonceBN).umod(this.ec.curve.n).toString(\"hex\");\n  }\n\n}\n\nexport { GetOrSetNonceError, Torus as default, kCombinations, keccak256, keyAssign, keyLookup, thresholdSame, waitKeyLookup };\n//# sourceMappingURL=torusUtils.esm.js.map\n",null,null,null,null,null,null,null,null,null,null,"export * from './asStream';\nexport * from './ComposedStore';\nexport * from './MergedStore';\nexport * from './ObservableStore';\nexport * from './transform';\n","import { Duplex as DuplexStream } from 'stream';\n\nimport { ObservableStore } from './ObservableStore';\n\nclass ObservableStoreStream<T> extends DuplexStream {\n  handler: (state: T) => void;\n\n  obsStore: ObservableStore<T>;\n\n  constructor(obsStore: ObservableStore<T>) {\n    super({\n      // pass values, not serializations\n      objectMode: true,\n    });\n    // dont buffer outgoing updates\n    this.resume();\n    // save handler so we can unsubscribe later\n    this.handler = (state: T) => this.push(state);\n    // subscribe to obsStore changes\n    this.obsStore = obsStore;\n    this.obsStore.subscribe(this.handler);\n  }\n\n  // emit current state on new destination\n  pipe<U extends NodeJS.WritableStream>(\n    dest: U,\n    options?: { end?: boolean },\n  ): U {\n    const result = super.pipe(dest, options);\n    dest.write(this.obsStore.getState() as any);\n    return result;\n  }\n\n  // write from incoming stream to state\n  _write(\n    chunk: any,\n    _encoding: string,\n    callback: (error?: Error | null) => void,\n  ): void {\n    this.obsStore.putState(chunk);\n    callback();\n  }\n\n  // noop - outgoing stream is asking us if we have data we arent giving it\n  _read(_size: number): void {\n    return undefined;\n  }\n\n  // unsubscribe from event emitter\n  _destroy(err: Error | null, callback: (error: Error | null) => void): void {\n    this.obsStore.unsubscribe(this.handler);\n    super._destroy(err, callback);\n  }\n}\n\nexport function storeAsStream<T>(\n  obsStore: ObservableStore<T>,\n): ObservableStoreStream<T> {\n  return new ObservableStoreStream(obsStore);\n}\n","import { ObservableStore } from './ObservableStore';\n\nexport class ComposedStore<\n  T extends Record<string, Record<string, unknown>>,\n> extends ObservableStore<T> {\n  private _children: Record<keyof T, ObservableStore<T[keyof T]>>;\n\n  constructor(children: Record<keyof T, ObservableStore<T[keyof T]>>) {\n    // Typecast: Preserve existing behavior\n    super({} as unknown as T);\n\n    // subscribe to children\n    this._children = children || {};\n    Object.keys(this._children).forEach((childKey) => {\n      const child = this._children[childKey];\n      this._addChild(childKey, child);\n    });\n  }\n\n  _addChild(childKey: keyof T, child: ObservableStore<T[keyof T]>) {\n    const updateFromChild = (childValue: T[keyof T]) => {\n      const state = this.getState();\n      state[childKey] = childValue;\n      this.putState(state);\n    };\n\n    child.subscribe(updateFromChild);\n    updateFromChild(child.getState());\n  }\n}\n","import { ObservableStore } from './ObservableStore';\n\nexport class MergedStore<\n  T extends Record<string, unknown>,\n> extends ObservableStore<T> {\n  private _children: ObservableStore<Partial<T>>[];\n\n  constructor(children = []) {\n    // Typecast: Preserve existing behavior\n    super({} as unknown as T);\n\n    this._children = children;\n    // subscribe to children\n    children.forEach((child) => this._addChild(child));\n    this._updateWholeState();\n  }\n\n  _addChild(child: ObservableStore<Partial<T>>): void {\n    child.subscribe(() => this._updateWholeState());\n  }\n\n  _updateWholeState(): void {\n    const childStates = this._children.map((child) => child.getState());\n    // apply shallow merge over states\n    const state = Object.assign({}, ...childStates);\n    this.putState(state);\n  }\n}\n","import { obj as TransformStream } from 'through2';\n\nexport function storeTransformStream<T, U>(syncTransformFn: (state: T) => U) {\n  return TransformStream((state, _encoding, cb) => {\n    try {\n      const newState = syncTransformFn(state);\n      cb(null, newState);\n      return undefined;\n    } catch (err) {\n      cb(err);\n      return undefined;\n    }\n  });\n}\n","var Transform = require('readable-stream').Transform\n  , inherits  = require('util').inherits\n  , xtend     = require('xtend')\n\nfunction DestroyableTransform(opts) {\n  Transform.call(this, opts)\n  this._destroyed = false\n}\n\ninherits(DestroyableTransform, Transform)\n\nDestroyableTransform.prototype.destroy = function(err) {\n  if (this._destroyed) return\n  this._destroyed = true\n  \n  var self = this\n  process.nextTick(function() {\n    if (err)\n      self.emit('error', err)\n    self.emit('close')\n  })\n}\n\n// a noop _transform function\nfunction noop (chunk, enc, callback) {\n  callback(null, chunk)\n}\n\n\n// create a new export function, used by both the main export and\n// the .ctor export, contains common logic for dealing with arguments\nfunction through2 (construct) {\n  return function (options, transform, flush) {\n    if (typeof options == 'function') {\n      flush     = transform\n      transform = options\n      options   = {}\n    }\n\n    if (typeof transform != 'function')\n      transform = noop\n\n    if (typeof flush != 'function')\n      flush = null\n\n    return construct(options, transform, flush)\n  }\n}\n\n\n// main export, just make me a transform stream!\nmodule.exports = through2(function (options, transform, flush) {\n  var t2 = new DestroyableTransform(options)\n\n  t2._transform = transform\n\n  if (flush)\n    t2._flush = flush\n\n  return t2\n})\n\n\n// make me a reusable prototype that I can `new`, or implicitly `new`\n// with a constructor call\nmodule.exports.ctor = through2(function (options, transform, flush) {\n  function Through2 (override) {\n    if (!(this instanceof Through2))\n      return new Through2(override)\n\n    this.options = xtend(options, override)\n\n    DestroyableTransform.call(this, this.options)\n  }\n\n  inherits(Through2, DestroyableTransform)\n\n  Through2.prototype._transform = transform\n\n  if (flush)\n    Through2.prototype._flush = flush\n\n  return Through2\n})\n\n\nmodule.exports.obj = through2(function (options, transform, flush) {\n  var t2 = new DestroyableTransform(xtend({ objectMode: true, highWaterMark: 16 }, options))\n\n  t2._transform = transform\n\n  if (flush)\n    t2._flush = flush\n\n  return t2\n})\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport Torus from '@toruslabs/torus-embed';\nimport { BaseAdapter, WALLET_ADAPTERS, ADAPTER_NAMESPACES, CHAIN_NAMESPACES, ADAPTER_CATEGORY, ADAPTER_STATUS, getChainConfig, log, ADAPTER_EVENTS, WalletInitializationError, Web3AuthError, WalletLoginError } from '@web3auth/base';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nclass TorusWalletAdapter extends BaseAdapter {\n  constructor() {\n    let params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n\n    _defineProperty(this, \"name\", WALLET_ADAPTERS.TORUS_EVM);\n\n    _defineProperty(this, \"adapterNamespace\", ADAPTER_NAMESPACES.EIP155);\n\n    _defineProperty(this, \"currentChainNamespace\", CHAIN_NAMESPACES.EIP155);\n\n    _defineProperty(this, \"type\", ADAPTER_CATEGORY.EXTERNAL);\n\n    _defineProperty(this, \"status\", ADAPTER_STATUS.NOT_READY);\n\n    _defineProperty(this, \"torusInstance\", null);\n\n    _defineProperty(this, \"torusWalletOptions\", void 0);\n\n    _defineProperty(this, \"initParams\", void 0);\n\n    _defineProperty(this, \"loginSettings\", {});\n\n    _defineProperty(this, \"rehydrated\", false);\n\n    this.torusWalletOptions = params.adapterSettings || {};\n    this.initParams = params.initParams || {};\n    this.loginSettings = params.loginSettings || {};\n    this.chainConfig = params.chainConfig || null;\n  }\n\n  get provider() {\n    if (this.status === ADAPTER_STATUS.CONNECTED && this.torusInstance) {\n      return this.torusInstance.provider;\n    }\n\n    return null;\n  }\n\n  set provider(_) {\n    throw new Error(\"Not implemented\");\n  }\n\n  async init(options) {\n    super.checkInitializationRequirements(); // set chainConfig for mainnet by default if not set\n\n    let network;\n\n    if (!this.chainConfig) {\n      this.chainConfig = getChainConfig(CHAIN_NAMESPACES.EIP155, 1);\n      const {\n        blockExplorer,\n        displayName\n      } = this.chainConfig;\n      network = {\n        chainId: 1,\n        host: \"mainnet\",\n        blockExplorer,\n        networkName: displayName\n      };\n    } else {\n      const {\n        chainId,\n        blockExplorer,\n        displayName,\n        rpcTarget\n      } = this.chainConfig;\n      network = {\n        chainId: parseInt(chainId, 16),\n        host: rpcTarget,\n        blockExplorer,\n        networkName: displayName\n      };\n    }\n\n    this.torusInstance = new Torus(this.torusWalletOptions);\n    log.debug(\"initializing torus evm adapter init\");\n    await this.torusInstance.init(_objectSpread(_objectSpread({\n      showTorusButton: false\n    }, this.initParams), {}, {\n      network\n    }));\n    this.status = ADAPTER_STATUS.READY;\n    this.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.TORUS_EVM);\n\n    try {\n      log.debug(\"initializing torus evm adapter\");\n\n      if (options.autoConnect) {\n        this.rehydrated = true;\n        await this.connect();\n      }\n    } catch (error) {\n      log.error(\"Failed to connect with torus evm provider\", error);\n      this.emit(ADAPTER_EVENTS.ERRORED, error);\n    }\n  }\n\n  async connect() {\n    super.checkConnectionRequirements();\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    this.status = ADAPTER_STATUS.CONNECTING;\n    this.emit(ADAPTER_EVENTS.CONNECTING, {\n      adapter: WALLET_ADAPTERS.TORUS_EVM\n    });\n\n    try {\n      await this.torusInstance.login(this.loginSettings);\n      const {\n        chainId\n      } = this.torusInstance.provider;\n\n      if (chainId && parseInt(chainId) !== parseInt(this.chainConfig.chainId, 16)) {\n        const {\n          chainId: _chainId,\n          blockExplorer,\n          displayName,\n          rpcTarget,\n          ticker,\n          tickerName\n        } = this.chainConfig;\n        const network = {\n          chainId: _chainId,\n          host: rpcTarget,\n          blockExplorerUrl: blockExplorer,\n          networkName: displayName,\n          tickerName,\n          ticker,\n          logo: \"\"\n        }; // in some cases when user manually switches chain and relogin then adapter will not connect to initially passed\n        // chainConfig but will connect to the one that user switched to.\n        // So here trying to switch network to the one that was initially passed in chainConfig.\n\n        await this.torusInstance.setProvider(_objectSpread({}, network));\n        const updatedChainID = await this.torusInstance.ethereum.request({\n          method: \"eth_chainId\"\n        });\n\n        if (updatedChainID && parseInt(updatedChainID) !== parseInt(this.chainConfig.chainId, 16)) {\n          throw WalletInitializationError.fromCode(5000, \"Not connected to correct chainId. Expected: \".concat(this.chainConfig.chainId, \", Current: \").concat(updatedChainID));\n        }\n      }\n\n      this.status = ADAPTER_STATUS.CONNECTED;\n      this.torusInstance.showTorusButton();\n      this.emit(ADAPTER_STATUS.CONNECTED, {\n        adapter: WALLET_ADAPTERS.TORUS_EVM,\n        reconnected: this.rehydrated\n      });\n      return this.provider;\n    } catch (error) {\n      // ready again to be connected\n      this.status = ADAPTER_STATUS.READY;\n      this.rehydrated = false;\n      this.emit(ADAPTER_STATUS.ERRORED, error);\n      throw error instanceof Web3AuthError ? error : WalletLoginError.connectionError(\"Failed to login with torus wallet\");\n    }\n  }\n\n  async disconnect() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      cleanup: false\n    };\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    await this.torusInstance.logout();\n    this.torusInstance.hideTorusButton();\n\n    if (options.cleanup) {\n      this.status = ADAPTER_STATUS.NOT_READY;\n      this.torusInstance = null;\n    } else {\n      // ready to be connected again\n      this.status = ADAPTER_STATUS.READY;\n    }\n\n    this.rehydrated = false;\n    this.emit(ADAPTER_EVENTS.DISCONNECTED);\n  }\n\n  async getUserInfo() {\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    const userInfo = await this.torusInstance.getUserInfo(\"\");\n    return userInfo;\n  }\n\n  setAdapterSettings(_) {}\n\n}\n\nexport { TorusWalletAdapter };\n//# sourceMappingURL=torusEvmAdapter.esm.js.map\n"],"sourceRoot":""}