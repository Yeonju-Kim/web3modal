(this.webpackJsonpexample=this.webpackJsonpexample||[]).push([[1],{1579:function(e,t,n){"use strict";var r=n(1581);Object.defineProperty(t,"__esModule",{value:!0}),t.PROMISE_RESOLVED_VOID=t.PROMISE_RESOLVED_TRUE=t.PROMISE_RESOLVED_FALSE=void 0,t.are3PCSupported=function(){if("undefined"===typeof navigator)return!1;var e=i.default.parse(navigator.userAgent);h.info(JSON.stringify(e),"current browser info");var t=!0;navigator.brave&&(t=!1);e.engine.name!==i.default.ENGINE_MAP.WebKit&&e.engine.name!==i.default.ENGINE_MAP.Gecko||(t=!1);return t},t.isPromise=function(e){return!(!e||"function"!==typeof e.then)},t.log=void 0,t.microSeconds=function(){var e=(new Date).getTime();return e===u?(f++,1e3*e+f):(u=e,f=0,1e3*e)},t.randomInt=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},t.randomToken=function(){return Math.random().toString(36).substring(2)},t.setLogLevel=void 0,t.sleep=function(e,t){e||(e=0);return new Promise((function(n){return setTimeout((function(){return n(t)}),e)}))};var i=r(n(170)),o=r(n(144));var s=Promise.resolve(!1);t.PROMISE_RESOLVED_FALSE=s;var a=Promise.resolve(!0);t.PROMISE_RESOLVED_TRUE=a;var c=Promise.resolve();t.PROMISE_RESOLVED_VOID=c;var u=0,f=0;var h=o.default.getLogger("broadcast-channel");t.log=h,h.setLevel("error");t.setLogLevel=function(e){h.setLevel(e)}},1581:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},1582:function(e,t,n){"use strict";function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}n.d(t,"a",(function(){return r})),r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.emitReserved=r.prototype.emit,r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},1583:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n(1590);function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var o=setTimeout,s=clearTimeout;function a(e,t){t.useNativeTimers?(e.setTimeoutFn=o.bind(r.a),e.clearTimeoutFn=s.bind(r.a)):(e.setTimeoutFn=setTimeout.bind(r.a),e.clearTimeoutFn=clearTimeout.bind(r.a))}function c(e){return"string"===typeof e?function(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))}},1587:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return A})),n.d(t,"c",(function(){return R})),n.d(t,"d",(function(){return N})),n.d(t,"e",(function(){return L})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return F})),n.d(t,"h",(function(){return H})),n.d(t,"i",(function(){return T})),n.d(t,"j",(function(){return I}));n(103);var r=n(238),i=(n(63),n(0)),o=n(6),s=(n(84),n(65),n(10)),a=n(11),c=n(25),u=n(16),f=n(17),h=n(14),l=n.n(h),d=n(76),p=n(237),v=n(717),y=n.n(v),g=(n(38),n(69)),b=n(144),m=n.n(b);n(1635),n(311),n(170),n(28);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e){Object(u.a)(n,e);var t=Object(f.a)(n);function n(e){var r;Object(s.a)(this,n);var i=e.config,o=void 0===i?{}:i,a=e.state,u=void 0===a?{}:a;return r=t.call(this),l()(Object(c.a)(r),"defaultConfig",{}),l()(Object(c.a)(r),"defaultState",{}),l()(Object(c.a)(r),"disabled",!1),l()(Object(c.a)(r),"name","BaseController"),l()(Object(c.a)(r),"initialConfig",void 0),l()(Object(c.a)(r),"initialState",void 0),l()(Object(c.a)(r),"internalConfig",r.defaultConfig),l()(Object(c.a)(r),"internalState",r.defaultState),r.initialState=u,r.initialConfig=o,r}return Object(a.a)(n,[{key:"config",get:function(){return this.internalConfig}},{key:"state",get:function(){return this.internalState}},{key:"configure",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n)for(var r in this.internalConfig=t?e:Object.assign(this.internalConfig,e),this.internalConfig)"undefined"!==typeof this.internalConfig[r]&&(this[r]=this.internalConfig[r]);else for(var i in e)"undefined"!==typeof this.internalConfig[i]&&(this.internalConfig[i]=e[i],this[i]=e[i])}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.internalState=k(t?{}:k({},this.internalState),e),this.emit("store",this.internalState)}},{key:"initialize",value:function(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}}]),n}(d.e),_=function(){return!0},j=["newListener","removeListener"],E=function(e){return!j.includes(e)};function S(e,t){var n=(t||{}).eventFilter||_;if("string"===typeof n&&"skipInternal"===n&&(n=E),"function"!==typeof n)throw new Error("createEventEmitterProxy - Invalid eventFilter");var r=e,i=function(e){var t=r;r=e,t.eventNames().filter(n).forEach((function(n){(function(e,t){return e.rawListeners(t)})(t,n).forEach((function(t){return e.on(n,t)}))})),t.removeAllListeners()};return new Proxy({},{get:function(e,t){return"setTarget"===t?i:r[t]},set:function(e,t,n){return"setTarget"===t?(i=n,!0):(r[t]=n,!0)}})}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=y()();function T(e){var t=new d.e;return t.sendAsync=function(){var t=Object(o.a)(Object(i.a)().mark((function t(n){var r,o,s,a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handle(n);case 2:if(!(r=t.sent).error){t.next=6;break}throw a=Object(p.serializeError)(r.error,{fallbackError:{message:(null===(o=r.error)||void 0===o?void 0:o.message)||r.error.toString(),code:(null===(s=r.error)||void 0===s?void 0:s.code)||-32603}}),p.ethErrors.rpc.internal(a);case 6:return t.abrupt("return",r.result);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.send=function(t,n){if("function"!==typeof n)throw new Error('Must provide callback to "send" method.');e.handle(t,n)},e.on&&e.on("notification",(function(e){t.emit("data",null,e)})),t.request=function(){var e=Object(o.a)(Object(i.a)().mark((function e(n){var r,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x(x({},n),{},{id:C(),jsonrpc:"2.0"}),e.next=3,t.sendAsync(r);case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}var R={IFRAME_STATUS:"iframe_status",CREATE_WINDOW:"create_window",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},A={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",OPENED_WINDOW:"opened_window",CLOSED_WINDOW:"closed_window",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key"},N={GET_PROVIDER_STATE:"wallet_get_provider_state"},L={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};d.e;function B(e,t){if(""!==e&&!/^[0-9a-f]+$/i.test(e))throw new Error("Expected an unprefixed hex string. Received: ".concat(e));if(t<0)throw new Error("Expected a non-negative integer target length. Received: ".concat(t));return String.prototype.padStart.call(e,t,"0")}var I=function(t,n){var r=e.from(t,"hex"),i=Object(g.stripHexPrefix)(n),o=Object(g.ecsign)(e.from(i,"hex"),r);return function(e,t,n){var r=Object(g.fromSigned)(t),i=Object(g.fromSigned)(n),o=Object(g.bufferToInt)(e),s=B(Object(g.toUnsigned)(r).toString("hex"),64),a=B(Object(g.toUnsigned)(i).toString("hex"),64),c=Object(g.stripHexPrefix)(function(e){var t=e.toString(16);return"0x".concat(t)}(o));return Object(g.addHexPrefix)(s.concat(a,c))}(Object(g.intToBuffer)(o.v),o.r,o.s)};Error;var M=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function D(e){switch(e.status){case 405:throw p.ethErrors.rpc.methodNotFound();case 418:throw p.ethErrors.rpc.internal({message:"Request is being rate limited."});case 503:case 504:throw p.ethErrors.rpc.internal({message:"Gateway timeout. The request took too long to process.This can happen when querying over too wide a block range."})}}function U(e){return new Promise((function(t){return setTimeout(t,e)}))}function q(e,t){if(200!==e.status)throw p.ethErrors.rpc.internal({message:"Non-200 status code: '".concat(e.status,"'"),data:t});if(t.error)throw p.ethErrors.rpc.internal({data:t.error});return t.result}function V(e){var t=e.req,n=e.rpcTarget,r=e.originHttpHeaderKey,i=new URL(n),o={id:t.id,jsonrpc:t.jsonrpc,method:t.method,params:t.params},s=t.origin,a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)};return r&&s&&(a.headers[r]=s),{fetchUrl:i.href,fetchParams:a}}function F(e){var t=e.rpcTarget,n=e.originHttpHeaderKey;return Object(d.f)(function(){var e=Object(o.a)(Object(i.a)().mark((function e(r,o,s){var a,c,u,f,h,l,d,p,v;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=V({req:r,rpcTarget:t,originHttpHeaderKey:n}),c=a.fetchUrl,u=a.fetchParams,f=5,h=1e3,l=0;case 4:if(!(l<f)){e.next=26;break}return e.prev=5,e.next=8,fetch(c,u);case 8:return D(d=e.sent),e.next=12,d.json();case 12:return p=e.sent,v=q(d,p),o.result=v,e.abrupt("return");case 18:e.prev=18,e.t0=e.catch(5),function(){var t=e.t0.toString();if(!M.some((function(e){return t.includes(e)})))throw e.t0}();case 21:return e.next=23,U(h);case 23:l++,e.next=4;break;case 26:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(t,n,r){return e.apply(this,arguments)}}())}function H(e){return function(t,n,r){r((function(r){n.error&&m.a.warn("Error in RPC response:\n",n),t.isTorusInternal||(m.a.info("RPC (".concat(e.origin,"):"),t,"->",n),r())}))}}var K;!function(e){e.approved="approved",e.cancelled="cancelled",e.confirmed="confirmed",e.failed="failed",e.finalized="finalized",e.processed="processed",e.rejected="rejected",e.signed="signed",e.submitted="submitted",e.unapproved="unapproved",e.dropped="dropped",e.expired="expired"}(K||(K={}))}).call(this,n(12).Buffer)},1588:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillOptionsWithDefaults=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));"undefined"===typeof t.support3PC&&(t.support3PC=(0,r.are3PCSupported)());"undefined"===typeof t.webWorkerSupport&&(t.webWorkerSupport=!0);t.idb||(t.idb={});t.idb.ttl||(t.idb.ttl=45e3);t.idb.fallbackInterval||(t.idb.fallbackInterval=150);e.idb&&"function"===typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose);t.localstorage||(t.localstorage={});t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4);t.server||(t.server={});t.server.url||(t.server.url="https://broadcast-server.tor.us");t.server.removeTimeout||(t.server.removeTimeout=3e5);e.methods&&(t.methods=e.methods);return t};var r=n(1579)},1589:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(25),i=n(84),o=n(65),s=n(11),a=n(10),c=n(16),u=n(17),f=n(238),h=n(1593),l=n(1582),d=n(1583),p=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e,r,i){var o;return Object(a.a)(this,n),(o=t.call(this,e)).description=r,o.context=i,o.type="TransportError",o}return Object(s.a)(n)}(Object(f.a)(Error)),v=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this)).writable=!1,Object(d.b)(Object(r.a)(i),e),i.opts=e,i.query=e.query,i.readyState="",i.socket=e.socket,i}return Object(s.a)(n,[{key:"onError",value:function(e,t,r){return Object(i.a)(Object(o.a)(n.prototype),"emitReserved",this).call(this,"error",new p(e,t,r)),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,Object(i.a)(Object(o.a)(n.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=Object(h.a)(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){Object(i.a)(Object(o.a)(n.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",Object(i.a)(Object(o.a)(n.prototype),"emitReserved",this).call(this,"close",e)}}]),n}(l.a)},1590:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")()},1593:function(e,t,n){"use strict";n.d(t,"e",(function(){return O})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return b})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return m}));var r=Object.create(null);r.open="0",r.close="1",r.ping="2",r.pong="3",r.message="4",r.upgrade="5",r.noop="6";var i=Object.create(null);Object.keys(r).forEach((function(e){i[r[e]]=e}));for(var o={type:"error",data:"parser error"},s="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),a="function"===typeof ArrayBuffer,c=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)},u=function(e,t,n){var i,o=e.type,u=e.data;return s&&u instanceof Blob?t?n(u):c(u,n):a&&(u instanceof ArrayBuffer||(i=u,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer))?t?n(u):c(new Blob([u]),n):n(r[o]+(u||""))},f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="undefined"===typeof Uint8Array?[]:new Uint8Array(256),l=0;l<f.length;l++)h[f.charCodeAt(l)]=l;var d="function"===typeof ArrayBuffer,p=function(e,t){if(d){var n=function(e){var t,n,r,i,o,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var u=new ArrayBuffer(s),f=new Uint8Array(u);for(t=0;t<a;t+=4)n=h[e.charCodeAt(t)],r=h[e.charCodeAt(t+1)],i=h[e.charCodeAt(t+2)],o=h[e.charCodeAt(t+3)],f[c++]=n<<2|r>>4,f[c++]=(15&r)<<4|i>>2,f[c++]=(3&i)<<6|63&o;return u}(e);return v(n,t)}return{base64:!0,data:e}},v=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},y=function(e,t){if("string"!==typeof e)return{type:"message",data:v(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:p(e.substring(1),t)}:i[n]?e.length>1?{type:i[n],data:e.substring(1)}:{type:i[n]}:o},g=String.fromCharCode(30),b=function(e,t){var n=e.length,r=new Array(n),i=0;e.forEach((function(e,o){u(e,!1,(function(e){r[o]=e,++i===n&&t(r.join(g))}))}))},m=function(e,t){for(var n=e.split(g),r=[],i=0;i<n.length;i++){var o=y(n[i],t);if(r.push(o),"error"===o.type)break}return r},O=4},1597:function(e,t,n){"use strict";n.r(t),n.d(t,"ObliviousSet",(function(){return r})),n.d(t,"removeTooOldValues",(function(){return i})),n.d(t,"now",(function(){return o}));var r=function(){function e(e){this.ttl=e,this.map=new Map,this._to=!1}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.add=function(e){var t=this;this.map.set(e,o()),this._to||(this._to=!0,setTimeout((function(){t._to=!1,i(t)}),0))},e.prototype.clear=function(){this.map.clear()},e}();function i(e){for(var t=o()-e.ttl,n=e.map[Symbol.iterator]();;){var r=n.next().value;if(!r)return;var i=r[0];if(!(r[1]<t))return;e.map.delete(i)}}function o(){return(new Date).getTime()}},1598:function(e,t,n){"use strict";function r(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function i(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},1600:function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return j}));var r=n(0),i=n(6),o=n(63),s=n(10),a=n(11),c=n(25),u=n(16),f=n(17),h=n(84),l=n(65),d=n(14),p=n.n(d),v=n(1587),y=n(9),g=n(237),b=n(76),m=n(717),O=n.n(m);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){Object(u.a)(n,e);var t=Object(f.a)(n);function n(e){var r,i;Object(s.a)(this,n);var a=e.config,u=e.state;if(i=t.call(this,{config:a,state:u}),p()(Object(c.a)(i),"_providerEngineProxy",null),!a.chainConfig)throw y.k.invalidProviderConfigError("Please provide chainConfig");if(!a.chainConfig.chainId)throw y.k.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!a.chainConfig.rpcTarget)throw y.k.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");return i.defaultState={chainId:"loading"},i.defaultConfig={chainConfig:a.chainConfig,networks:Object(o.a)({},a.chainConfig.chainId,a.chainConfig)},Object(h.a)((r=Object(c.a)(i),Object(l.a)(n.prototype)),"initialize",r).call(r),i}return Object(a.a)(n,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(e){throw new Error("Method not implemented.")}},{key:"addChain",value:function(e){if(!e.chainId)throw g.ethErrors.rpc.invalidParams("chainId is required");if(!e.rpcTarget)throw g.ethErrors.rpc.invalidParams("chainId is required");this.configure({networks:w(w({},this.config.networks),{},Object(o.a)({},e.chainId,e))})}},{key:"getChainConfig",value:function(e){var t,n=null===(t=this.config.networks)||void 0===t?void 0:t[e];if(!n)throw g.ethErrors.rpc.invalidRequest("Chain ".concat(e," is not supported, please add chainConfig for it"));return n}},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=Object(v.f)(e)}}]),n}(v.a),j=function(){function e(){Object(s.a)(this,e),p()(this,"_providerEngineProxy",null)}return Object(a.a)(e,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(e){throw new Error("Method not implemented.")}},{key:"addChain",value:function(e){throw new Error("Method not implemented.")}},{key:"setupProvider",value:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var n,i,o;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.getPrivKeyMiddleware(t),(i=new b.b).push(n),o=Object(v.i)(i),this.updateProviderEngineProxy(o);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=Object(v.f)(e)}},{key:"getPrivKeyMiddleware",value:function(e){var t={getPrivatekey:function(){var t=Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()};return this.createPrivKeyMiddleware(t)}},{key:"createPrivKeyMiddleware",value:function(e){var t=e.getPrivatekey;function n(){return(n=Object(i.a)(Object(r.a)().mark((function e(n,i){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:i.result=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.h)({private_key:Object(b.f)((function(e,t){return n.apply(this,arguments)}))})}}]),e}();p()(j,"getProviderInstance",function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new j,e.next=3,n.setupProvider(t.privKey);case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());O()()},1607:function(e,t,n){var r=n(3)();e.exports=r;try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},1608:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={},s=0,a=0;function c(e){var t="";do{t=i[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function u(){var e=c(+new Date);return e!==r?(s=0,r=e):e+"."+c(s++)}for(;a<64;a++)o[i[a]]=a},1635:function(e,t,n){"use strict";var r=n(1636);e.exports={BroadcastChannel:r.BroadcastChannel,enforceOptions:r.enforceOptions}},1636:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BroadcastChannel",{enumerable:!0,get:function(){return r.BroadcastChannel}}),Object.defineProperty(t,"OPEN_BROADCAST_CHANNELS",{enumerable:!0,get:function(){return r.OPEN_BROADCAST_CHANNELS}}),Object.defineProperty(t,"enforceOptions",{enumerable:!0,get:function(){return r.enforceOptions}});var r=n(1637)},1637:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OPEN_BROADCAST_CHANNELS=t.BroadcastChannel=void 0,t.enforceOptions=function(e){a=e};var r=n(1579),i=n(1638),o=n(1588),s=new Set;t.OPEN_BROADCAST_CHANNELS=s;var a,c=0,u=function(e,t){this.id=c++,s.add(this),this.name=e,a&&(t=a),this.options=(0,o.fillOptionsWithDefaults)(t),this.method=(0,i.chooseMethod)(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,function(e){var t=e.method.create(e.name,e.options);(0,r.isPromise)(t)?(e._prepP=t,t.then((function(t){e._state=t}))):e._state=t}(this)};function f(e,t,n){var i={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:r.PROMISE_RESOLVED_VOID).then((function(){var t=e.method.postMessage(e._state,i);return e._uMP.add(t),t.catch().then((function(){return e._uMP.delete(t)})),t}))}function h(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function l(e,t,n){e._addEL[t].push(n),function(e){if(!e._iL&&h(e)){var t=function(t){e._addEL[t.type].forEach((function(n){var r=1e5,i=n.time-r;(t.time>=i||"server"===e.method.type)&&n.fn(t.data)}))},n=e.method.microSeconds();e._prepP?e._prepP.then((function(){e._iL=!0,e.method.onMessage(e._state,t,n)})):(e._iL=!0,e.method.onMessage(e._state,t,n))}}(e)}function d(e,t,n){e._addEL[t]=e._addEL[t].filter((function(e){return e!==n})),function(e){if(e._iL&&!h(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}t.BroadcastChannel=u,u._pubkey=!0,u.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return f(this,"message",e)},postInternal:function(e){return f(this,"internal",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};d(this,"message",this._onML),e&&"function"===typeof e?(this._onML=t,l(this,"message",t)):this._onML=null},addEventListener:function(e,t){l(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){d(this,e,this._addEL[e].find((function(e){return e.fn===t})))},close:function(){var e=this;if(!this.closed){s.delete(this),this.closed=!0;var t=this._prepP?this._prepP:r.PROMISE_RESOLVED_VOID;return this._onML=null,this._addEL.message=[],t.then((function(){return Promise.all(Array.from(e._uMP))})).then((function(){return Promise.all(e._befC.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}},get type(){return this.method.type},get isClosed(){return this.closed}}},1638:function(e,t,n){"use strict";var r=n(1581);Object.defineProperty(t,"__esModule",{value:!0}),t.chooseMethod=function(e){var t=[].concat(e.methods,u).filter(Boolean);if(e.type){if("simulate"===e.type)return c.default;var n=t.find((function(t){return t.type===e.type}));if(n)return n;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||(t=t.filter((function(e){return"idb"!==e.type})));var r=t.find((function(t){return t.canBeUsed(e)}));if(r)return r;throw new Error("No useable method found in "+JSON.stringify(u.map((function(e){return e.type}))))};var i=r(n(1639)),o=r(n(1640)),s=r(n(1641)),a=r(n(1642)),c=r(n(1646)),u=[i.default,o.default,s.default,a.default]},1639:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.averageResponseTime=h,t.canBeUsed=f,t.close=a,t.create=s,t.microSeconds=t.default=void 0,t.onMessage=u,t.postMessage=c,t.type=void 0;var r=n(1579),i=r.microSeconds;t.microSeconds=i;var o="native";function s(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t}function a(e){e.bc.close(),e.subFns=[]}function c(e,t){try{return e.bc.postMessage(t,!1),r.PROMISE_RESOLVED_VOID}catch(n){return Promise.reject(n)}}function u(e,t){e.messagesCallback=t}function f(e){if("undefined"===typeof window)return!1;if(!e.support3PC)return!1;if("function"===typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1}function h(){return 150}t.type=o;var l={create:s,close:a,onMessage:u,postMessage:c,canBeUsed:f,type:o,averageResponseTime:h,microSeconds:i};t.default=l},1640:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRANSACTION_SETTINGS=void 0,t.averageResponseTime=j,t.canBeUsed=_,t.cleanOldMessages=y,t.close=O,t.commitIndexedDBTransaction=f,t.create=g,t.createDatabase=h,t.default=void 0,t.getAllMessages=function(e){var t=e.transaction(a,"readonly",c),n=t.objectStore(a),r=[];return new Promise((function(e){n.openCursor().onsuccess=function(n){var i=n.target.result;i?(r.push(i.value),i.continue()):(f(t),e(r))}}))},t.getIdb=u,t.getMessagesHigherThan=d,t.getOldMessages=v,t.microSeconds=void 0,t.onMessage=w,t.postMessage=k,t.removeMessagesById=p,t.type=void 0,t.writeMessage=l;var r=n(1579),i=n(1597),o=n(1588),s=r.microSeconds;t.microSeconds=s;var a="messages",c={durability:"relaxed"};t.TRANSACTION_SETTINGS=c;function u(){if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof window){if("undefined"!==typeof window.mozIndexedDB)return window.mozIndexedDB;if("undefined"!==typeof window.webkitIndexedDB)return window.webkitIndexedDB;if("undefined"!==typeof window.msIndexedDB)return window.msIndexedDB}return!1}function f(e){e.commit&&e.commit()}function h(e){var t="pubkey.broadcast-channel-0-"+e,n=u().open(t);return n.onupgradeneeded=function(e){e.target.result.createObjectStore(a,{keyPath:"id",autoIncrement:!0})},new Promise((function(e,t){n.onerror=function(e){return t(e)},n.onsuccess=function(){e(n.result)}}))}function l(e,t,n){var r={uuid:t,time:(new Date).getTime(),data:n},i=e.transaction([a],"readwrite",c);return new Promise((function(e,t){i.oncomplete=function(){return e()},i.onerror=function(e){return t(e)},i.objectStore(a).add(r),f(i)}))}function d(e,t){var n=e.transaction(a,"readonly",c),r=n.objectStore(a),i=[],o=IDBKeyRange.bound(t+1,1/0);if(r.getAll){var s=r.getAll(o);return new Promise((function(e,t){s.onerror=function(e){return t(e)},s.onsuccess=function(t){e(t.target.result)}}))}return new Promise((function(e,s){var a=function(){try{return o=IDBKeyRange.bound(t+1,1/0),r.openCursor(o)}catch(e){return r.openCursor()}}();a.onerror=function(e){return s(e)},a.onsuccess=function(r){var o=r.target.result;o?o.value.id<t+1?o.continue(t+1):(i.push(o.value),o.continue()):(f(n),e(i))}}))}function p(e,t){var n=e.transaction([a],"readwrite",c).objectStore(a);return Promise.all(t.map((function(e){var t=n.delete(e);return new Promise((function(e){t.onsuccess=function(){return e()}}))})))}function v(e,t){var n=(new Date).getTime()-t,r=e.transaction(a,"readonly",c),i=r.objectStore(a),o=[];return new Promise((function(e){i.openCursor().onsuccess=function(t){var i=t.target.result;if(i){var s=i.value;if(!(s.time<n))return f(r),void e(o);o.push(s),i.continue()}else e(o)}}))}function y(e,t){return v(e,t).then((function(t){return p(e,t.map((function(e){return e.id})))}))}function g(e,t){return t=(0,o.fillOptionsWithDefaults)(t),h(e).then((function(n){var o={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:(0,r.randomToken)(),eMIs:new i.ObliviousSet(2*t.idb.ttl),writeBlockPromise:r.PROMISE_RESOLVED_VOID,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){o.closed=!0,t.idb.onclose&&t.idb.onclose()},b(o),o}))}function b(e){e.closed||m(e).then((function(){return(0,r.sleep)(e.options.idb.fallbackInterval)})).then((function(){return b(e)}))}function m(e){return e.closed?r.PROMISE_RESOLVED_VOID:e.messagesCallback?d(e.db,e.lastCursorId).then((function(t){var n=t.filter((function(e){return!!e})).map((function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t})).filter((function(t){return function(e,t){return e.uuid!==t.uuid&&!t.eMIs.has(e.id)&&!(e.data.time<t.messagesCallbackTime)}(t,e)})).sort((function(e,t){return e.time-t.time}));return n.forEach((function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))})),r.PROMISE_RESOLVED_VOID})):r.PROMISE_RESOLVED_VOID}function O(e){e.closed=!0,e.db.close()}function k(e,t){return e.writeBlockPromise=e.writeBlockPromise.then((function(){return l(e.db,e.uuid,t)})).then((function(){0===(0,r.randomInt)(0,10)&&y(e.db,e.options.idb.ttl)})),e.writeBlockPromise}function w(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,m(e)}function _(e){return!!e.support3PC&&!!u()}function j(e){return 2*e.idb.fallbackInterval}t.type="idb";var E={create:g,close:O,onMessage:w,postMessage:k,canBeUsed:_,type:"idb",averageResponseTime:j,microSeconds:s};t.default=E},1641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addStorageEventListener=h,t.averageResponseTime=g,t.canBeUsed=y,t.close=p,t.create=d,t.default=void 0,t.getLocalStorage=c,t.microSeconds=void 0,t.onMessage=v,t.postMessage=f,t.removeStorageEventListener=l,t.storageKey=u,t.type=void 0;var r=n(1597),i=n(1588),o=n(1579),s=o.microSeconds;t.microSeconds=s;var a="localstorage";function c(){var e;if("undefined"===typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(t){}return e}function u(e){return"pubkey.broadcastChannel-"+e}function f(e,t){return new Promise((function(n){(0,o.sleep)().then((function(){var r=u(e.channelName),i={token:(0,o.randomToken)(),time:(new Date).getTime(),data:t,uuid:e.uuid},s=JSON.stringify(i);c().setItem(r,s);var a=document.createEvent("Event");a.initEvent("storage",!0,!0),a.key=r,a.newValue=s,window.dispatchEvent(a),n()}))}))}function h(e,t){var n=u(e),r=function(e){e.key===n&&t(JSON.parse(e.newValue))};return window.addEventListener("storage",r),r}function l(e){window.removeEventListener("storage",e)}function d(e,t){if(!y(t=(0,i.fillOptionsWithDefaults)(t)))throw new Error("BroadcastChannel: localstorage cannot be used");var n=(0,o.randomToken)(),s=new r.ObliviousSet(t.localstorage.removeTimeout),a={channelName:e,uuid:n,eMIs:s};return a.listener=h(e,(function(e){a.messagesCallback&&e.uuid!==n&&e.token&&!s.has(e.token)&&(e.data.time&&e.data.time<a.messagesCallbackTime||(s.add(e.token),a.messagesCallback(e.data)))})),a}function p(e){l(e.listener)}function v(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function y(e){if(!e.support3PC)return!1;var t=c();if(!t)return!1;try{var n="__broadcastchannel_check";t.setItem(n,"works"),t.removeItem(n)}catch(r){return!1}return!0}function g(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120}t.type=a;var b={create:d,close:p,onMessage:v,postMessage:f,canBeUsed:y,type:a,averageResponseTime:g,microSeconds:s};t.default=b},1642:function(e,t,n){"use strict";var r=n(1581);Object.defineProperty(t,"__esModule",{value:!0}),t.averageResponseTime=E,t.canBeUsed=j,t.close=w,t.create=k,t.default=void 0,t.getSocketInstance=m,t.keccak256=p,t.microSeconds=void 0,t.onMessage=_,t.postMessage=b,t.removeStorageEventListener=function(){y&&y.disconnect()},t.setupSocketConnection=O,t.storageKey=g,t.type=void 0;var i=r(n(1607)),o=r(n(5)),s=n(1597),a=n(1665),c=n(149),u=n(1645),f=r(n(239)),h=n(1579),l=n(1588),d=h.microSeconds;function p(e){return(0,f.default)("keccak256").update(e).digest()}t.microSeconds=d;var v="server";t.type=v;var y=null;function g(e){return"pubkey.broadcastChannel-"+e}function b(e,t){return new Promise((function(n,r){(0,h.sleep)().then((0,o.default)(i.default.mark((function o(){var s,a,f,l;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=g(e.channelName),a=p(s),i.next=4,(0,u.encryptData)(a.toString("hex"),{token:(0,h.randomToken)(),time:(new Date).getTime(),data:t,uuid:e.uuid});case 4:return f=i.sent,i.t0=(0,c.getPublic)(a).toString("hex"),i.t1=f,i.next=9,(0,c.sign)(a,p(f));case 9:return i.t2=i.sent.toString("hex"),l={key:i.t0,data:i.t1,signature:i.t2},e.timeout&&(l.timeout=e.timeout),i.abrupt("return",fetch(e.serverUrl+"/channel/set",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json; charset=utf-8"}}).then(n).catch(r));case 13:case"end":return i.stop()}}),o)}))))}))}function m(e){if(y)return y;var t=(0,a.io)(e,{transports:["websocket","polling"],withCredentials:!0,reconnectionDelayMax:1e4,reconnectionAttempts:10});return t.on("connect_error",(function(e){t.io.opts.transports=["polling","websocket"],h.log.error("connect error",e)})),t.on("connect",(0,o.default)(i.default.mark((function e(){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.io.engine,h.log.debug("initially connected to",n.transport.name),n.once("upgrade",(function(){h.log.debug("upgraded",n.transport.name)})),n.once("close",(function(e){h.log.debug("connection closed",e)}));case 4:case"end":return e.stop()}}),e)})))),t.on("error",(function(e){h.log.error("socket errored",e),t.disconnect()})),t.on("disconnect",(function(){h.log.debug("socket disconnected")})),y=t,t}function O(e,t,n){var r=m(e),s=p(g(t)),a=(0,c.getPublic)(s).toString("hex");r.connected?r.emit("check_auth_status",a):r.once("connect",(function(){h.log.debug("connected with socket"),r.emit("check_auth_status",a)}));var f=function(){var e=(0,o.default)(i.default.mark((function e(t){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.decryptData)(s.toString("hex"),t);case 3:r=e.sent,h.log.info(r),n(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h.log.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return r.on(a+"_success",f),document.addEventListener("visibilitychange",(function e(){r?r.connected||"visible"!==document.visibilityState||r.once("connect",(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.emit("check_auth_status",a);case 1:case"end":return e.stop()}}),e)})))):document.removeEventListener("visibilitychange",e)})),r}function k(e,t){t=(0,l.fillOptionsWithDefaults)(t);var n={channelName:e,uuid:(0,h.randomToken)(),eMIs:new s.ObliviousSet(t.server.removeTimeout),serverUrl:t.server.url};return t.server.timeout&&(n.timeout=t.server.timeout),O(t.server.url,e,(function(e){n.messagesCallback&&e.uuid!==n.uuid&&e.token&&!n.eMIs.has(e.token)&&(n.eMIs.add(e.token),n.messagesCallback(e.data))})),n}function w(){}function _(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function j(){return!0}function E(){return 500}var S={create:k,close:w,onMessage:_,postMessage:b,canBeUsed:j,type:v,averageResponseTime:E,microSeconds:d};t.default=S},1643:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(10),i=n(11),o=n(16),s=n(17),a=n(1589),c=n(1598),u=n(1608),f=n(1583),h=n(1644),l=n(1593),d="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),p=function(t){Object(o.a)(a,t);var n=Object(s.a)(a);function a(e){var t;return Object(r.a)(this,a),(t=n.call(this,e)).supportsBinary=!e.forceBase64,t}return Object(i.a)(a,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=d?{}:Object(f.c)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=h.d&&!d?t?new h.a(e,t):new h.a(e):new h.a(e,t,n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType||h.b,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(t){var n=this;this.writable=!1;for(var r=function(r){var i=t[r],o=r===t.length-1;Object(l.c)(i,n.supportsBinary,(function(t){var r={};h.d||(i.options&&(r.compress=i.options.compress),n.opts.perMessageDeflate&&("string"===typeof t?e.byteLength(t):t.length)<n.opts.perMessageDeflate.threshold&&(r.compress=!1));try{h.d?n.ws.send(t):n.ws.send(t,r)}catch(s){}o&&Object(h.c)((function(){n.writable=!0,n.emitReserved("drain")}),n.setTimeoutFn)}))},i=0;i<t.length;i++)r(i)}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=Object(u.a)()),this.supportsBinary||(e.b64=1);var r=Object(c.b)(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!h.a}}]),a}(a.a)}).call(this,n(12).Buffer)},1644:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return a}));var r=n(1590),i="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},o=r.a.WebSocket||r.a.MozWebSocket,s=!0,a="arraybuffer"},1645:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"decryptData",(function(){return P})),n.d(t,"default",(function(){return O})),n.d(t,"ec",(function(){return g})),n.d(t,"encParamsBufToHex",(function(){return j})),n.d(t,"encParamsHexToBuf",(function(){return _})),n.d(t,"encryptAndSetData",(function(){return R})),n.d(t,"encryptData",(function(){return E})),n.d(t,"getAndDecryptData",(function(){return C})),n.d(t,"getDeviceShare",(function(){return U})),n.d(t,"getTorusShare",(function(){return M})),n.d(t,"keccak256",(function(){return y})),n.d(t,"setDeviceShare",(function(){return B})),n.d(t,"setTorusShare",(function(){return N}));var r=n(0),i=n(6),o=n(10),s=n(11),a=n(14),c=n.n(a),u=n(311),f=n(430),h=n.n(f),l=n(90),d=n(239),p=n.n(d),v=n(149);function y(e){return p()("keccak256").update(e).digest()}var g=new l.ec("secp256k1");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(){function t(){Object(o.a)(this,t);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://metadata.tor.us",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;c()(this,"metadataHost",void 0),c()(this,"serverTimeOffset",void 0),this.metadataHost=e,this.serverTimeOffset=n}return Object(s.a)(t,[{key:"generateMetadataParams",value:function(t,n){var r,i,o=g.keyFromPrivate(n,"hex"),s={data:t,timestamp:Math.floor(this.serverTimeOffset+Date.now()/1e3).toString(16)},a=o.sign(y(h()(s)));return{pub_key_X:o.getPublic().getX().toString("hex"),pub_key_Y:o.getPublic().getY().toString("hex"),set_data:s,signature:e.from(null!==(r=a.r.toString(16,64)+a.s.toString(16,64)+(null===(i=a.recoveryParam)||void 0===i?void 0:i.toString(16).padStart(2,"0").slice(-2)))&&void 0!==r?r:"00","hex").toString("base64")}}},{key:"generatePubKeyParams",value:function(e){var t=g.keyFromPrivate(e,"hex");return{pub_key_X:t.getPublic().getX().toString("hex"),pub_key_Y:t.getPublic().getY().toString("hex")}}},{key:"setMetadata",value:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n,i){var o,s;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null!==n?m(m({},t),{},{namespace:n}):t,e.next=3,Object(u.d)("".concat(this.metadataHost,"/set"),o,i,{useAPIKey:!0});case 3:return s=e.sent,e.abrupt("return",s.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getMetadata",value:function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n,i){var o,s;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null!==n?m(m({},t),{},{namespace:n}):t,e.next=3,Object(u.d)("".concat(this.metadataHost,"/get"),o,i,{useAPIKey:!0});case 3:return s=e.sent,e.abrupt("return",s.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}],[{key:"setAPIKey",value:function(e){Object(u.f)(e)}},{key:"setEmbedHost",value:function(e){Object(u.g)(e)}}]),t}(),k="webauthn_torus_share",w="webauthn_device_share";function _(t){return{iv:e.from(t.iv,"hex"),ephemPublicKey:e.from(t.ephemPublicKey,"hex"),ciphertext:e.from(t.ciphertext,"hex"),mac:e.from(t.mac,"hex")}}function j(t){return{iv:e.from(t.iv).toString("hex"),ephemPublicKey:e.from(t.ephemPublicKey).toString("hex"),ciphertext:e.from(t.ciphertext).toString("hex"),mac:e.from(t.mac).toString("hex")}}function E(e,t){return S.apply(this,arguments)}function S(){return(S=Object(i.a)(Object(r.a)().mark((function t(n,i){var o,s,a,c,u;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=JSON.stringify(i),s=e.from(o,"utf-8"),t.next=4,Object(v.encrypt)(Object(v.getPublic)(e.from(n,"hex")),s);case 4:return a=t.sent,c=j(a),u=JSON.stringify(c),t.abrupt("return",u);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(e,t){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(Object(r.a)().mark((function t(n,i){var o,s,a,c,u,f;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=JSON.parse(i),s=_(o),a=g.keyFromPrivate(n),t.next=5,Object(v.decrypt)(e.from(a.getPrivate().toString("hex",64),"hex"),s);case 5:return c=t.sent,u=c.toString("utf-8"),f=JSON.parse(u),t.abrupt("return",f);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(e,t,n){return T.apply(this,arguments)}function T(){return(T=Object(i.a)(Object(r.a)().mark((function e(t,n,i){var o,s,a,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=g.keyFromPrivate(n),s=o.getPublic(),e.next=4,t.getMetadata({pub_key_X:s.getX().toString(16),pub_key_Y:s.getY().toString(16)},i);case 4:if(a=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,P(n,a);case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,n,r){return A.apply(this,arguments)}function A(){return(A=Object(i.a)(Object(r.a)().mark((function e(t,n,i,o){var s,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(n,i);case 2:return s=e.sent,a=t.generateMetadataParams(s,n),e.next=6,t.setMetadata(a,o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,n,r,i){return L.apply(this,arguments)}function L(){return(L=Object(i.a)(Object(r.a)().mark((function t(n,i,o,s,a){var c,u,f,h,l,d,p,y,b;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=g.keyFromPrivate(o),u=c.getPrivate(),f=g.keyFromPublic({x:i.pub_key_X,y:i.pub_key_Y}),t.next=5,C(n,o,k);case 5:return h=t.sent,l={},h&&(l=h),d=JSON.stringify(a),p=e.from(d,"utf-8"),t.next=12,Object(v.encrypt)(e.from(f.getPublic("hex"),"hex"),p);case 12:return y=t.sent,b=j(y),l[s]=b,t.next=17,R(n,u.toString("hex",64),l,k);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(e,t,n,r){return I.apply(this,arguments)}function I(){return(I=Object(i.a)(Object(r.a)().mark((function e(t,n,i,o){var s,a,c,u;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=g.keyFromPrivate(n),a=s.getPrivate(),e.next=4,C(t,n,w);case 4:return c=e.sent,u={},c&&(u=c),u[i]=o,e.next=10,R(t,a.toString("hex",64),u,w);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,n,r){return D.apply(this,arguments)}function D(){return(D=Object(i.a)(Object(r.a)().mark((function t(n,i,o,s){var a,c,u,f,h,l,d,p;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(n,o,k);case 2:if(a=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:if(c=a[s]){t.next=8;break}return t.abrupt("return",null);case 8:return u=_(c),f=g.keyFromPrivate(i),h=f.getPrivate(),t.next=13,Object(v.decrypt)(e.from(h.toString("hex",64),"hex"),u);case 13:return l=t.sent,d=l.toString("utf-8"),p=JSON.parse(d),t.abrupt("return",p);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function U(e,t,n){return q.apply(this,arguments)}function q(){return(q=Object(i.a)(Object(r.a)().mark((function e(t,n,i){var o;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t,n,w);case 2:if(!(o=e.sent)){e.next=5;break}return e.abrupt("return",o[i]);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}.call(this,n(12).Buffer)},1646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.averageResponseTime=h,t.canBeUsed=f,t.close=a,t.create=s,t.microSeconds=t.default=void 0,t.onMessage=u,t.postMessage=c,t.type=void 0;var r=n(1579).microSeconds;t.microSeconds=r;var i="simulate";t.type=i;var o=new Set;function s(e){var t={name:e,messagesCallback:null};return o.add(t),t}function a(e){o.delete(e)}function c(e,t){return new Promise((function(n){return setTimeout((function(){Array.from(o).filter((function(t){return t.name===e.name})).filter((function(t){return t!==e})).filter((function(e){return!!e.messagesCallback})).forEach((function(e){return e.messagesCallback(t)})),n()}),5)}))}function u(e,t){e.messagesCallback=t}function f(){return!0}function h(){return 5}var l={create:s,close:a,onMessage:u,postMessage:c,canBeUsed:f,type:i,averageResponseTime:h,microSeconds:r};t.default=l},1665:function(e,t,n){"use strict";n.r(t),n.d(t,"protocol",(function(){return K})),n.d(t,"Manager",(function(){return Q})),n.d(t,"Socket",(function(){return X})),n.d(t,"io",(function(){return ee})),n.d(t,"connect",(function(){return ee})),n.d(t,"default",(function(){return ee}));var r={};n.r(r),n.d(r,"protocol",(function(){return K})),n.d(r,"PacketType",(function(){return H})),n.d(r,"Encoder",(function(){return W})),n.d(r,"Decoder",(function(){return J}));var i=n(10),o=n(11),s=n(25),a=n(16),c=n(17),u=n(1589),f=n(1608),h=n(1598),l=n(1593),d=!1;try{d="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(te){}var p=d,v=n(1590);function y(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||p))return new XMLHttpRequest}catch(n){}if(!t)try{return new(v.a[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}var g=n(1582),b=n(1583);function m(){}var O=null!=new y({xdomain:!1}).responseType,k=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){var r;if(Object(i.a)(this,n),(r=t.call(this,e)).polling=!1,"undefined"!==typeof location){var o="https:"===location.protocol,s=location.port;s||(s=o?"443":"80"),r.xd="undefined"!==typeof location&&e.hostname!==location.hostname||s!==e.port,r.xs=e.secure!==o}var a=e&&e.forceBase64;return r.supportsBinary=O&&!a,r}return Object(o.a)(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;Object(l.b)(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,Object(l.d)(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=Object(f.a)()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=Object(h.b)(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new w(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(function(e,t){n.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,n){e.onError("xhr poll error",t,n)})),this.pollXhr=t}}]),n}(u.a),w=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e,r){var o;return Object(i.a)(this,n),o=t.call(this),Object(b.b)(Object(s.a)(o),r),o.opts=r,o.method=r.method||"GET",o.uri=e,o.async=!1!==r.async,o.data=void 0!==r.data?r.data:null,o.create(),o}return Object(o.a)(n,[{key:"create",value:function(){var e=this,t=Object(b.c)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var r=this.xhr=new y(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}catch(o){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}try{r.setRequestHeader("Accept","*/*")}catch(o){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(o){return void this.setTimeoutFn((function(){e.onError(o)}),0)}"undefined"!==typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=m,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),n}(g.a);if(w.requestsCount=0,w.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",j);else if("function"===typeof addEventListener){var _="onpagehide"in v.a?"pagehide":"unload";addEventListener(_,j,!1)}function j(){for(var e in w.requests)w.requests.hasOwnProperty(e)&&w.requests[e].abort()}var E={websocket:n(1643).a,polling:k},S=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,P=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function x(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var i=S.exec(e||""),o={},s=14;s--;)o[P[s]]=i[s]||"";return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,o.path),o.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,o.query),o}var C=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(this,n),r=t.call(this),e&&"object"===typeof e&&(o=e,e=null),e?(e=x(e),o.hostname=e.host,o.secure="https"===e.protocol||"wss"===e.protocol,o.port=e.port,e.query&&(o.query=e.query)):o.host&&(o.hostname=x(o.host).host),Object(b.b)(Object(s.a)(r),o),r.secure=null!=o.secure?o.secure:"undefined"!==typeof location&&"https:"===location.protocol,o.hostname&&!o.port&&(o.port=r.secure?"443":"80"),r.hostname=o.hostname||("undefined"!==typeof location?location.hostname:"localhost"),r.port=o.port||("undefined"!==typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=o.transports||["polling","websocket"],r.readyState="",r.writeBuffer=[],r.prevBufferLen=0,r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},o),r.opts.path=r.opts.path.replace(/\/$/,"")+"/","string"===typeof r.opts.query&&(r.opts.query=Object(h.a)(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"===typeof addEventListener&&(r.opts.closeOnBeforeunload&&addEventListener("beforeunload",(function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())}),!1),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return Object(o.a)(n,[{key:"createTransport",value:function(e){var t=Object.assign({},this.opts.query);t.EIO=l.e,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new E[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(r){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,r=this.createTransport(e),i=!1;n.priorWebsocketSuccess=!1;var o=function(){i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!i)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,t.transport.pause((function(){i||"closed"!==t.readyState&&(h(),t.setTransport(r),r.send([{type:"upgrade"}]),t.emitReserved("upgrade",r),r=null,t.upgrading=!1,t.flush())}))}else{var o=new Error("probe error");o.transport=r.name,t.emitReserved("upgradeError",o)}})))};function s(){i||(i=!0,h(),r.close(),r=null)}var a=function(e){var n=new Error("probe error: "+e);n.transport=r.name,s(),t.emitReserved("upgradeError",n)};function c(){a("transport closed")}function u(){a("socket closed")}function f(e){r&&e.name!==r.name&&s()}var h=function(){r.removeListener("open",o),r.removeListener("error",a),r.removeListener("close",c),t.off("close",u),t.off("upgrading",f)};r.once("open",o),r.once("error",a),r.once("close",c),this.once("close",u),this.once("upgrading",f),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e=1,t=0;t<this.writeBuffer.length;t++){var n=this.writeBuffer[t].data;if(n&&(e+=Object(b.a)(n)),t>0&&e>this.maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){n.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(g.a);C.protocol=l.e;C.protocol;var T=n(310),R=n(84),A=n(65),N="function"===typeof ArrayBuffer,L=Object.prototype.toString,B="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===L.call(Blob),I="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===L.call(File);function M(e){return N&&(e instanceof ArrayBuffer||function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||B&&e instanceof Blob||I&&e instanceof File}function D(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(D(e[n]))return!0;return!1}if(M(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return D(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&D(e[i]))return!0;return!1}function U(e){var t=[],n=e.data,r=e;return r.data=q(n,t),r.attachments=t.length,{packet:r,buffers:t}}function q(e,t){if(!e)return e;if(M(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=q(e[i],t);return r}if("object"===typeof e&&!(e instanceof Date)){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(o[s]=q(e[s],t));return o}return e}function V(e,t){return e.data=F(e.data,t),e.attachments=void 0,e}function F(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=F(e[n],t);else if("object"===typeof e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=F(e[r],t));return e}var H,K=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(H||(H={}));var W=function(){function e(t){Object(i.a)(this,e),this.replacer=t}return Object(o.a)(e,[{key:"encode",value:function(e){return e.type!==H.EVENT&&e.type!==H.ACK||!D(e)?[this.encodeAsString(e)]:(e.type=e.type===H.EVENT?H.BINARY_EVENT:H.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==H.BINARY_EVENT&&e.type!==H.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=U(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}(),J=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this)).reviver=e,r}return Object(o.a)(n,[{key:"add",value:function(e){var t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");(t=this.decodeString(e)).type===H.BINARY_EVENT||t.type===H.BINARY_ACK?(this.reconstructor=new Y(t),0===t.attachments&&Object(R.a)(Object(A.a)(n.prototype),"emitReserved",this).call(this,"decoded",t)):Object(R.a)(Object(A.a)(n.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!M(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,Object(R.a)(Object(A.a)(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===H[r.type])throw new Error("unknown packet type "+r.type);if(r.type===H.BINARY_EVENT||r.type===H.BINARY_ACK){for(var i=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var o=e.substring(i,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===e.charAt(t+1)){for(var s=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(s,t)}else r.nsp="/";var a=e.charAt(t+1);if(""!==a&&Number(a)==a){for(var c=t+1;++t;){var u=e.charAt(t);if(null==u||Number(u)!=u){--t;break}if(t===e.length)break}r.id=Number(e.substring(c,t+1))}if(e.charAt(++t)){var f=this.tryParse(e.substr(t));if(!n.isPayloadValid(r.type,f))throw new Error("invalid payload");r.data=f}return r}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case H.CONNECT:return"object"===typeof t;case H.DISCONNECT:return void 0===t;case H.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case H.EVENT:case H.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case H.ACK:case H.BINARY_ACK:return Array.isArray(t)}}}]),n}(g.a),Y=function(){function e(t){Object(i.a)(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return Object(o.a)(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=V(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function z(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var G=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),X=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e,r,o){var s;return Object(i.a)(this,n),(s=t.call(this)).connected=!1,s.receiveBuffer=[],s.sendBuffer=[],s.ids=0,s.acks={},s.flags={},s.io=e,s.nsp=r,o&&o.auth&&(s.auth=o.auth),s.io._autoConnect&&s.open(),s}return Object(o.a)(n,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[z(e,"open",this.onopen.bind(this)),z(e,"packet",this.onpacket.bind(this)),z(e,"error",this.onerror.bind(this)),z(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(G.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.unshift(e);var i={type:H.EVENT,data:n,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){var o=this.ids++,s=n.pop();this._registerAckCallback(o,s),i.id=o}var a=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,c=this.flags.volatile&&(!a||!this.connected);return c||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n=this,r=this.flags.timeout;if(void 0!==r){var i=this.io.setTimeoutFn((function(){delete n.acks[e];for(var r=0;r<n.sendBuffer.length;r++)n.sendBuffer[r].id===e&&n.sendBuffer.splice(r,1);t.call(n,new Error("operation has timed out"))}),r);this.acks[e]=function(){n.io.clearTimeoutFn(i);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];t.apply(n,[null].concat(r))}}else this.acks[e]=t}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e.packet({type:H.CONNECT,data:t})})):this.packet({type:H.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case H.CONNECT:if(e.data&&e.data.sid){var t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case H.EVENT:case H.BINARY_EVENT:this.onevent(e);break;case H.ACK:case H.BINARY_ACK:this.onack(e);break;case H.DISCONNECT:this.ondisconnect();break;case H.CONNECT_ERROR:this.destroy();var n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,r=this._anyListeners.slice(),i=Object(T.a)(r);try{for(i.s();!(t=i.n()).done;){t.value.apply(this,e)}}catch(te){i.e(te)}finally{i.f()}}Object(R.a)(Object(A.a)(n.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t.packet({type:H.ACK,id:e,data:i})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:H.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=this._anyOutgoingListeners.slice(),r=Object(T.a)(n);try{for(r.s();!(t=r.n()).done;){t.value.apply(this,e.data)}}catch(te){r.e(te)}finally{r.f()}}}}]),n}(g.a);function $(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}$.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},$.prototype.reset=function(){this.attempts=0},$.prototype.setMin=function(e){this.ms=e},$.prototype.setMax=function(e){this.max=e},$.prototype.setJitter=function(e){this.jitter=e};var Q=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e,o){var a,c;Object(i.a)(this,n),(a=t.call(this)).nsps={},a.subs=[],e&&"object"===typeof e&&(o=e,e=void 0),(o=o||{}).path=o.path||"/socket.io",a.opts=o,Object(b.b)(Object(s.a)(a),o),a.reconnection(!1!==o.reconnection),a.reconnectionAttempts(o.reconnectionAttempts||1/0),a.reconnectionDelay(o.reconnectionDelay||1e3),a.reconnectionDelayMax(o.reconnectionDelayMax||5e3),a.randomizationFactor(null!==(c=o.randomizationFactor)&&void 0!==c?c:.5),a.backoff=new $({min:a.reconnectionDelay(),max:a.reconnectionDelayMax(),jitter:a.randomizationFactor()}),a.timeout(null==o.timeout?2e4:o.timeout),a._readyState="closed",a.uri=e;var u=o.parser||r;return a.encoder=new u.Encoder,a.decoder=new u.Decoder,a._autoConnect=!1!==o.autoConnect,a._autoConnect&&a.open(),a}return Object(o.a)(n,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new C(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=z(n,"open",(function(){r.onopen(),e&&e()})),o=z(n,"error",(function(n){r.cleanup(),r._readyState="closed",t.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;0===s&&i();var a=this.setTimeoutFn((function(){i(),n.close(),n.emit("error",new Error("timeout"))}),s);this.opts.autoUnref&&a.unref(),this.subs.push((function(){clearTimeout(a)}))}return this.subs.push(i),this.subs.push(o),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(z(e,"ping",this.onping.bind(this)),z(e,"data",this.ondata.bind(this)),z(e,"error",this.onerror.bind(this)),z(e,"close",this.onclose.bind(this)),z(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){this.decoder.add(e)}},{key:"ondecoded",value:function(e){this.emitReserved("packet",e)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n||(n=new X(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),n}(g.a),Z={};function ee(e,t){"object"===typeof e&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=x(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),i=r.source,o=r.id,s=r.path,a=Z[o]&&s in Z[o].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||a?n=new Q(i,t):(Z[o]||(Z[o]=new Q(i,t)),n=Z[o]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}Object.assign(ee,{Manager:Q,Socket:X,io:ee,connect:ee})}}]);
//# sourceMappingURL=1.ef880c75.chunk.js.map